<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <!--
        Â© Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ | 
        
        rianma
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
        <link rel="dns-prefetch" href="https://www.google-analytics.com">
    
    
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="rianma">
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content=",node.js">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="rianma">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://myan.im">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ | rianma">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="">
    <meta property="og:article:tag" content="node.js"> 

    
        <meta property="article:published_time" content="3æœˆ 24, 2018">
        <meta property="article:modified_time" content="1æœˆ 18, 2019">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ | rianma">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="/img/favicon.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="http://myan.im">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://myan.im/2018/03/24/you-dont-know-npm/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "rianma",
        "logo": "/img/favicon.png"
    },
    "author": {
        "@type": "Person",
        "name": "rianma",
        "image": {
            "@type": "ImageObject",
            "url": "/img/favicon.png"
        },
        "description": "Hi, nice to meet you"
    },
    "headline": "2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ",
    "url": "http://myan.im/2018/03/24/you-dont-know-npm/index.html",
    "datePublished": "3æœˆ 24, 2018",
    "dateModified": "1æœˆ 18, 2019",
    "description": "",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://myan.im"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    .footer-sns-facebook {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHptNjU3LjYgODcuOGw0LjggMy44djU1LjJjMCA1NC42IDAgNTUuMi00LjYgNTkuNi00LjQgNC40LTYgNC42LTUwLjIgNS42bC00NS42IDEtNy4yIDUuNmMtMTAuNCA4LTE2LjggMTcuMi0xOS4yIDI3LjQtMSA1LTEuOCAyNC44LTEuOCA0NCAuMiAzOCAxLjYgNDQuNiAxMC44IDQ4IDIuOCAxLjIgMjguNCAyIDU2LjggMiA0Ny44IDAgNTIgLjIgNTYuMiAzLjhsNC44IDMuOHY1NS4yYzAgNTQuNiAwIDU1LjItNC42IDU5LjYtNC40IDQuNi01LjQgNC42LTU3IDUuMi0yOC44LjItNTQuNC44LTU2LjggMS40LTIuNC42LTUuNiAzLTYuOCA1LjQtMS44IDMuMi0yLjQgNDEuNC0yLjYgMTQzLjJsLS4yIDEzOC44LTUuNiA0LjgtNS42IDQuOEg2MDljLTUyLjQgMC01Mi44IDAtNTguMi00LjZsLTUuNC00LjYtLjItMTQwLjYtLjItMTQwLjYtNC44LTMuOGMtNC4yLTMuNC04LTMuOC0zNS42LTMuOC0zMi44IDAtNDEtMS44LTQzLjYtMTAtLjYtMi4yLTEuMi0yNS40LTEuMi01MS40IDAtNjAuOC0uMi01NyAzLjQtNjEuNiAyLjgtMy42IDYtNCAzNy44LTUgMzMtMSAzNS4yLTEuMiAzOS40LTUuNiA0LjYtNC40IDQuNi01LjIgNS44LTcxIDEuMi03My40LjItNjcuMiAxNi42LTk5LjQgOC0xNS44IDEyLjgtMjIgMjgtMzcgMTUuMi0xNS4yIDIxLjQtMTkuNiAzOC4yLTI4IDExLTUuNCAyNC0xMSAyOS0xMi4yIDYuMi0xLjggMjguNi0yLjYgNzEuMi0yLjYgNTguNi0uMiA2Mi42IDAgNjcgMy42eiIvPjwvc3ZnPg==);
    }
    
    
    .footer-sns-twitter {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHptNTMyLjggMjA1YzEwIDQgMjMgMTAuOCAyOC44IDE1LjIgMTIuNiA5LjIgMTYuNiAxMC42IDI5LjQgOS40IDYuNi0uNiAxMy0zLjIgMjAuNC04LjIgMTEuMi03LjYgMTkuNC05LjIgMjMuNi01IDMuNiAzLjYgMi44IDktMi44IDE4LjYtNy4yIDEyLjQtNiAxOC44IDQuMiAyNC4yIDQuNCAyLjIgOC4yIDUuNiA4LjYgNy40IDEgNC44LTEyLjYgMjQuMi0yMiAzMS44LTExLjggOS4yLTE3LjIgMjIuNi0xOS42IDQ3LjgtNC44IDUwLjQtNy44IDY2LjYtMTYuNCA4NS40LTMgNy03IDE3LjgtOC44IDI0LTEuOCA2LjQtNSAxNC42LTcuNCAxOC40LTIuMiAzLjgtNy40IDEzLTExLjQgMjAuNC0xNy4yIDMwLjgtNDMuNCA2MS40LTcxLjQgODMuOC0yNS42IDIwLjQtNDYgMzMuMi02NC4yIDQwLjItOC40IDMuMi0xOCA3LjYtMjEuNCA5LjYtNy40IDQuNi0yMi40IDguNi01Ny4yIDE1LTYyLjIgMTEuNi03OS4yIDExLjQtMTM1LjYtMS0zMi40LTctMzguNi05LTUyLTE2LjgtMjEuNC0xMi42LTI0LjItMTQuOC0yNC4yLTE5LjQgMC02LjIgMTAuMi05LjIgMzUtMTAuNCAyMi40LTEgMjguNi0yLjYgNTctMTQuMiAyMy44LTkuOCAyOS40LTEyLjggMzAuNC0xNi44IDIuMi04LjItMy0xMy4yLTI2LjgtMjUuNC0yNS44LTEzLjItMzIuMi0xOC40LTQzLjgtMzUuOC05LTEzLjYtMTAtMjEuMi0zLjYtMzMuNiA1LjQtMTAuOCAzLjYtMTUtMTEuOC0yNS40LTktNi0xNC0xMS42LTIwLjgtMjIuNi0yMy40LTM3LjgtMjUtNTAuOC03LjItNTkuOCA0LjgtMi40IDkuNC01LjQgMTAuMi02LjYgMi44LTQuMi0uNC0xNS42LTguNC0yOS0xMS42LTE5LjYtMTMuMi0yNS44LTEzLjItNTUuMiAwLTI4LjggMi42LTM3LjggMTItNDAuMiA5LTIuMiAxNC44IDEgMzUuNiAyMC4yIDI0LjggMjIuOCA0My42IDM2LjYgNjIuOCA0NS44IDggMy44IDE3LjggOS4yIDIyIDEyIDQuMiAyLjggMTQuOCA3IDIzLjQgOS4yIDguNiAyLjIgMjQuMiA2LjggMzQuOCAxMC4yIDEzLjQgNC40IDIzLjYgNi40IDMzIDYuNiAxMi44LjIgMTQuMi0uMiAxOC42LTUuNCA0LTQuOCA0LjgtNy44IDQuOC0xOS4yIDAtMTQuNCA1LjYtMzkuNiAxMS4yLTUwLjYgNC4yLTguNCAyOS4yLTM0LjIgMzkuOC00MS40IDcuOC01LjQgMzUuNi0xNiA1Mi0yMCAxNC4yLTMuNiAzMi42LTEuMiA1Mi40IDYuOHoiLz48L3N2Zz4=);
    }
    
    
    .footer-sns-gplus {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNiA3OGMtMjIuNCA1LjItNTUuOCA0MC4yLTYwLjYgNjMuNC0xLjQgNi40LTIgMTI5LjgtMS42IDM2Ny42LjYgMjk4LjYgMSAzNTguOCAzLjQgMzYzIDExIDIwLjIgMjEuNiAzMi40IDM3LjIgNDMgMTUgMTAuMiAxNy40IDExLjIgMzMgMTMgMTEuMiAxLjQgMTM2IDIgMzY1IDEuNiAzMTQtLjYgMzQ4LjYtMSAzNTUtMy44IDE1LjgtNy4yIDMzLjgtMjIgNDMuMi0zNS40IDUuMi03LjQgMTAuOC0xNi42IDEyLjYtMjAuNCAyLjgtNi40IDMuMi00MC44IDMuOC0zNTQgLjQtMjIzLS4yLTM1My40LTEuNC0zNjUtMi0xNy0yLjYtMTguNi0xMy0zNC04LjYtMTIuNi0xNC4yLTE4LjQtMjUuMi0yNS44LTcuOC01LjQtMTcuNC0xMS0yMS42LTEyLjQtNi0yLjItNzIuOC0yLjYtMzY1LjQtMi42LTE5Ni44LjItMzYxIC44LTM2NC40IDEuOHpNNDMwIDI5NS40YzQwLjYgMTUuNCA1Ni42IDIzLjggNzIuNiAzOC40IDYuOCA2LjIgNy4yIDE1LjIgMSAyMy40LTYuMiA4LTMzLjYgMzMuOC0zOSAzNi42LTUuNiAyLjgtMTcuNiAyLjgtMjMuMi0uMi0yLjQtMS4yLTguMi01LjItMTMtOC44LTExLjItOC42LTI0LjYtMTEuMi01NS4yLTExLjItMjcuNCAwLTQwLjYgMi42LTUyLjIgMTAuNC00LjQgMi44LTEyLjIgNy42LTE3LjIgMTAuNi0yMyAxMy4yLTUxLjQgNTUtNTUuOCA4Mi40LTIuNiAxNS42LTIuNCAzNC44LjIgNTEgMi44IDE3LjQgMTkuOCA0OC44IDM1LjIgNjUuMiAxNiAxNi42IDQ1IDMzLjYgNjIuOCAzNi42IDI2LjggNC40IDY1LjggMS42IDc5LjQtNS44IDIwLjYtMTEuNCAzMS0xOSA0MS0zMC40IDE4LjgtMjEuNiAyMy40LTM0LjIgMTUuNi00My44LTMuOC00LjgtNC40LTQuOC01MS01LjgtNjAuOC0xLjItNTYuMiAyLjItNTYuMi00My4yIDAtMzIuNC4yLTMzLjIgNC44LTM3IDQuNC0zLjYgOS0zLjggOTItMy44IDc5IDAgODcuOC40IDk0LjIgMy42IDExLjIgNS42IDEzIDExLjQgMTIuOCA0My40IDAgMjUuNC0uOCAzMC44LTcuNiA1OC00IDE2LjYtOS44IDM0LTEyLjYgMzktMi44IDUtOC4yIDE0LjItMTEuNiAyMC42LTguNCAxNS40LTI3LjIgMzYuOC00MC44IDQ2LjYtNS44IDQuNC0xMy44IDEwLjItMTcuNiAxMy4yLTMuOCAzLTExIDctMTYuMiA4LjgtNS4yIDEuOC0xNi4yIDYuNC0yNC40IDEwLTIyLjQgOS42LTM0LjggMTEuNi03MyAxMS42LTM3LjYuMi00Ny0xLjQtNzEtMTItOC4yLTMuNi0xNy42LTcuMi0yMC44LTgtMTUuOC0zLjgtNjctNDUuMi03Ny44LTYyLjgtMi4yLTMuOC03LjYtMTEuNi0xMS44LTE3LjItNC4yLTUuNC05LTE0LTEwLjYtMTktMS44LTQuOC02LjItMTYtMTAtMjQuOC0zLjYtOC44LTcuOC0yMi4yLTkuMi0yOS42LTMuMi0xOC44LTEuNC03OS40IDIuOC05MS40IDEzLjgtNDAuNiAzNS42LTc4IDU4LjgtMTAwLjIgMTQtMTMuNiA0Ny4yLTM2LjQgNTgtMzkuOCA0LjItMS40IDEzLjQtNS4yIDIwLjYtOC40IDIyLTEwIDMyLjgtMTEuNiA3Ni0xMSAzMy44LjYgNDAuNCAxLjIgNTAgNC44em0zNDAuOCA4MC44YzggMy42IDkuNiAxMS4yIDkuMiAzOS4yLS42IDM0LjQtLjYgMzQgNSAzOS42IDQuOCA1IDUuNCA1IDM3LjYgNSA0My40IDAgNDQuNC44IDQzLjIgMzYuMi0uOCAxNy0xLjIgMTguNC02LjQgMjMtNS40IDQuNi02LjYgNC44LTM3LjYgNC44LTMxLjIgMC0zMiAuMi0zNi44IDUtNS42IDUuNC01LjYgNC40LTUgNDEuMi40IDI2LjQuMiAyNy40LTQuNiAzMy00LjggNS42LTYgNS44LTI0LjQgNi40LTIwLjguOC0yOS42LTEuNC0zMy40LTguNC0xLjQtMi42LTItMTUuNi0xLjgtMzUuNi40LTMxLjIuNC0zMS42LTQuNi0zNi42cy01LjYtNS0zNi01Yy0xOC44IDAtMzMtLjgtMzYtMi4yLTcuNi0zLjYtOS42LTExLjItOC44LTMzLjguOC0yOC4yLjQtMjggNDEtMjggNDUuNCAwIDQ1LjQgMCA0NC42LTQyLjYtLjYtMzMtLjYtMzMgNS0zOC40IDQuNC00LjYgNi4yLTUgMjQuOC01IDExIDAgMjIuMiAxIDI1IDIuMnoiLz48L3N2Zz4=);
    }
    
    
    
    
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "å¾®è½¯é›…é»‘", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <style>
        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 300;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-300.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: regular;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-regular.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: Roboto;
            font-style: normal;
            font-weight: 500;
            src: url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot);
            src: local('Roboto'),local('Roboto-Normal'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.eot?#iefix) format('embedded-opentype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff2) format('woff2'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.woff) format('woff'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.ttf) format('truetype'),url(https://lib.baomitu.com/fonts/roboto/roboto-v15-latin-500.svg#Roboto) format('svg')
        }

        @font-face {
            font-family: 'Material Icons';
            font-style: normal;
            font-weight: 400;
            src: url(https://lib.baomitu.com/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.eot);
            src: url(https://lib.baomitu.com/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.woff2) format('woff2'),url(https://lib.baomitu.com/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.woff) format('woff'),url(https://lib.baomitu.com/material-design-icons/3.0.1/iconfont/MaterialIcons-Regular.ttf) format('truetype')
        }
    </style>


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116305930-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116305930-1');
</script>


    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn" class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-npm-init"><span class="post-toc-number">1.</span> <span class="post-toc-text">1. npm init</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-1-npm-init-æ‰§è¡Œé»˜è®¤è¡Œä¸º"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">1.1 npm init æ‰§è¡Œé»˜è®¤è¡Œä¸º</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-2-è‡ªå®šä¹‰-npm-init-è¡Œä¸º"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">1.2 è‡ªå®šä¹‰ npm init è¡Œä¸º</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-ä¾èµ–åŒ…å®‰è£…"><span class="post-toc-number">2.</span> <span class="post-toc-text">2. ä¾èµ–åŒ…å®‰è£…</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-packageå®šä¹‰"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">2.1 packageå®šä¹‰</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-å®‰è£…æœ¬åœ°åŒ…-è¿œç¨‹gitä»“åº“åŒ…"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">2.2 å®‰è£…æœ¬åœ°åŒ…/è¿œç¨‹gitä»“åº“åŒ…</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-npm-install-å¦‚ä½•å·¥ä½œ-â€”â€”-node-modules-ç›®å½•ç»“æ„"><span class="post-toc-number">3.</span> <span class="post-toc-text">3. npm install å¦‚ä½•å·¥ä½œ â€”â€” node_modules ç›®å½•ç»“æ„</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-1-npm-2"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">3.1 npm 2</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-2-npm-3-æ‰å¹³ç»“æ„"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">3.2 npm 3 - æ‰å¹³ç»“æ„</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-3-npm-5-package-lock-æ–‡ä»¶"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">3.3 npm 5 - package-lock æ–‡ä»¶</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†"><span class="post-toc-number">4.</span> <span class="post-toc-text">4. ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-1-semver"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">4.1 semver</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-2-ä¾èµ–ç‰ˆæœ¬å‡çº§"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">4.2 ä¾èµ–ç‰ˆæœ¬å‡çº§</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-3-æœ€ä½³å®è·µ"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">4.3 æœ€ä½³å®è·µ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-npm-scripts"><span class="post-toc-number">5.</span> <span class="post-toc-text">5. npm scripts</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-1-åŸºæœ¬ä½¿ç”¨"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">5.1 åŸºæœ¬ä½¿ç”¨</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-node-modules-bin-ç›®å½•"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">5.2 node_modules/.bin ç›®å½•</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-npx"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">5.3 npx</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åœºæ™¯a-ä¸€é”®æ‰§è¡Œè¿œç¨‹-npm-æºçš„äºŒè¿›åˆ¶åŒ…"><span class="post-toc-number">5.3.1.</span> <span class="post-toc-text">åœºæ™¯a) ä¸€é”®æ‰§è¡Œè¿œç¨‹ npm æºçš„äºŒè¿›åˆ¶åŒ…</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åœºæ™¯b-ä¸€é”®æ‰§è¡Œ-GitHub-Gist"><span class="post-toc-number">5.3.2.</span> <span class="post-toc-text">åœºæ™¯b) ä¸€é”®æ‰§è¡Œ GitHub Gist</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#åœºæ™¯c-ä½¿ç”¨ä¸åŒç‰ˆæœ¬-node-æ‰§è¡Œå‘½ä»¤"><span class="post-toc-number">5.3.3.</span> <span class="post-toc-text">åœºæ™¯c) ä½¿ç”¨ä¸åŒç‰ˆæœ¬ node æ‰§è¡Œå‘½ä»¤</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-npm-é…ç½®"><span class="post-toc-number">6.</span> <span class="post-toc-text">6. npm é…ç½®</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-1-npm-config"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">6.1 npm config</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-2-npmrc-æ–‡ä»¶"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">6.2 npmrc æ–‡ä»¶</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-3-node-ç‰ˆæœ¬çº¦æŸ"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">6.3 node ç‰ˆæœ¬çº¦æŸ</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-å°ç»“-npm-æœ€ä½³å®è·µ"><span class="post-toc-number">7.</span> <span class="post-toc-text">7. å°ç»“ npm æœ€ä½³å®è·µ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-æ›´å¤šèµ„æ–™"><span class="post-toc-number">8.</span> <span class="post-toc-text">8. æ›´å¤šèµ„æ–™</span></a></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(https://i.gtimg.cn/aoi/sola/20180326210713_i9PM5g0Nv6.png)">
    
            <p class="article-headline-p">
                2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar">
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>rianma</strong>
        <span>3æœˆ 24, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/node-js/">node.js</a>
    </li></ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ&url=http://myan.im/2018/03/24/you-dont-know-npm/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                åˆ†äº«åˆ°å¾®åš
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ&url=http://myan.im/2018/03/24/you-dont-know-npm/index.html&via=rianma" target="_blank">
            <li class="mdl-menu__item">
                åˆ†äº«åˆ° Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://myan.im/2018/03/24/you-dont-know-npm/index.html" target="_blank">
            <li class="mdl-menu__item">
                åˆ†äº«åˆ° Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://myan.im/2018/03/24/you-dont-know-npm/index.html" target="_blank">
            <li class="mdl-menu__item">
                åˆ†äº«åˆ° Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>nodejs ç¤¾åŒºä¹ƒè‡³ Web å‰ç«¯å·¥ç¨‹åŒ–é¢†åŸŸå‘å±•åˆ°ä»Šå¤©ï¼Œä½œä¸º node è‡ªå¸¦çš„åŒ…ç®¡ç†å·¥å…·çš„ npm å·²ç»æˆä¸ºæ¯ä¸ªå‰ç«¯å¼€å‘è€…å¿…å¤‡çš„å·¥å…·ã€‚ä½†æ˜¯ç°å®çŠ¶å†µæ˜¯ï¼Œæˆ‘ä»¬å¾ˆå¤šäººå¯¹è¿™ä¸ªnodejsåŸºç¡€è®¾æ–½çš„ä½¿ç”¨å’Œäº†è§£è¿˜åœç•™åœ¨: ä¼šç”¨ <code>npm install</code> è¿™é‡Œï¼ˆä¸€è¨€ä¸åˆå°±åˆ é™¤æ•´ä¸ª node_modules ç›®å½•ç„¶åé‡æ–° install è¿™ç§äº‹ä½ æ²¡åšè¿‡å—ï¼Ÿï¼‰</p>
<p>å½“ç„¶ npm èƒ½æˆä¸ºç°åœ¨ä¸–ç•Œä¸Šæœ€å¤§è§„æ¨¡çš„<strong>åŒ…ç®¡ç†ç³»ç»Ÿ</strong>ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šç¡®å®å½’åŠŸäºå®ƒè¶³å¤Ÿ<strong>ç”¨æˆ·å‹å¥½</strong>ï¼Œä½ çœ‹å³ä½¿æˆ‘åªä¼šæ‰§è¡Œ install ä¹Ÿä¸å¿…å¤ªæ‹…å¿ƒå‡ºä»€ä¹ˆå¤§å²”å­ã€‚ä½†æ˜¯ npm çš„åŠŸèƒ½è¿œä¸æ­¢äº install ä¸€ä¸‹é‚£ä¹ˆç®€å•ï¼Œè¿™ç¯‡æ–‡ç« å¸®ä½ æ‰’ä¸€æ‰’é‚£äº›ä½ å¯èƒ½ä¸çŸ¥é“çš„ npm åŸç†ã€ç‰¹æ€§ã€æŠ€å·§ï¼Œä»¥åŠï¼ˆæˆ‘è®¤ä¸ºçš„ï¼‰æœ€ä½³å®è·µã€‚</p>
<p><del>ä½ æ‡’å¾—è¯»çš„ npm æ–‡æ¡£ï¼Œæˆ‘å¸®ä½ ç¿»è¯‘ç„¶åè¯•éªŒæ•´ç†è¿‡æ¥äº† ğŸ¶ğŸ¶ğŸ¶</del></p>
<h2 id="1-npm-init"><a href="#1-npm-init" class="headerlink" title="1. npm init"></a>1. npm init</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ package.json æ–‡ä»¶æ˜¯ç”¨æ¥å®šä¹‰ä¸€ä¸ª package çš„æè¿°æ–‡ä»¶, ä¹ŸçŸ¥é“<code>npm init</code> å‘½ä»¤ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªç®€å•çš„ package.json æ–‡ä»¶ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤åç»ˆç«¯ä¼šä¾æ¬¡è¯¢é—® name, version, description ç­‰å­—æ®µã€‚</p>
<h3 id="1-1-npm-init-æ‰§è¡Œé»˜è®¤è¡Œä¸º"><a href="#1-1-npm-init-æ‰§è¡Œé»˜è®¤è¡Œä¸º" class="headerlink" title="1.1 npm init æ‰§è¡Œé»˜è®¤è¡Œä¸º"></a>1.1 npm init æ‰§è¡Œé»˜è®¤è¡Œä¸º</h3><p>è€Œå¦‚æœæƒ³è¦å·æ‡’ä¸æƒ³ä¸€ç›´æŒ‰ enterï¼Œåœ¨å‘½ä»¤åè¿½åŠ  â€“yes å‚æ•°å³å¯ï¼Œå…¶ä½œç”¨ä¸ä¸€è·¯ä¸‹ä¸€æ­¥ç›¸åŒã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm init --yes</span><br></pre></td></tr></table></figure>
<h3 id="1-2-è‡ªå®šä¹‰-npm-init-è¡Œä¸º"><a href="#1-2-è‡ªå®šä¹‰-npm-init-è¡Œä¸º" class="headerlink" title="1.2 è‡ªå®šä¹‰ npm init è¡Œä¸º"></a>1.2 è‡ªå®šä¹‰ npm init è¡Œä¸º</h3><p>npm init å‘½ä»¤çš„åŸç†å¹¶ä¸å¤æ‚ï¼Œè°ƒç”¨è„šæœ¬ï¼Œè¾“å‡ºä¸€ä¸ªåˆå§‹åŒ–çš„ package.json æ–‡ä»¶å°±æ˜¯äº†ã€‚æ‰€ä»¥ç›¸åº”åœ°ï¼Œå®šåˆ¶ npm init å‘½ä»¤çš„å®ç°æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ Home ç›®å½•åˆ›å»ºä¸€ä¸ª <code>.npm-init.js</code> å³å¯ï¼Œè¯¥æ–‡ä»¶çš„ module.exports å³ä¸º package.json é…ç½®å†…å®¹ï¼Œéœ€è¦è·å–ç”¨æˆ·è¾“å…¥æ—¶å€™ï¼Œä½¿ç”¨ <code>prompt()</code> æ–¹æ³•å³å¯ã€‚</p>
<p>ä¾‹å¦‚ç¼–å†™è¿™æ ·çš„ ~/.npm-init.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> desc = prompt(<span class="string">'description?'</span>, <span class="string">'A new package...'</span>)</span><br><span class="line"><span class="keyword">const</span> bar = prompt(<span class="string">'bar?'</span>, <span class="string">''</span>)</span><br><span class="line"><span class="keyword">const</span> count = prompt(<span class="string">'count?'</span>, <span class="string">'42'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  key: <span class="string">'value'</span>,</span><br><span class="line">  foo: &#123;</span><br><span class="line">    bar: bar,</span><br><span class="line">    count: count</span><br><span class="line">  &#125;,</span><br><span class="line">  name: prompt(<span class="string">'name?'</span>, process.cwd().split(<span class="string">'/'</span>).pop()),</span><br><span class="line">  version: prompt(<span class="string">'version?'</span>, <span class="string">'0.1.0'</span>),</span><br><span class="line">  description: desc,</span><br><span class="line">  main: <span class="string">'index.js'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶åœ¨ ~/hello ç›®å½•ä¸‹æ‰§è¡Œ <code>npm init</code> å°†ä¼šå¾—åˆ°è¿™æ ·çš„ package.json:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"key"</span>: <span class="string">"value"</span>,</span><br><span class="line">  <span class="attr">"foo"</span>: &#123;</span><br><span class="line">    <span class="attr">"bar"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"count"</span>: <span class="string">"42"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"hello"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"A new package..."</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™¤äº†ç”Ÿæˆ package.json, å› ä¸º .npm-init.js æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ¨¡å—ï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ‰§è¡Œéšä¾¿ä»€ä¹ˆ node è„šæœ¬å¯ä»¥æ‰§è¡Œçš„ä»»åŠ¡ã€‚ä¾‹å¦‚é€šè¿‡ fs åˆ›å»º README, .eslintrc ç­‰é¡¹ç›®å¿…éœ€æ–‡ä»¶ï¼Œå®ç°é¡¹ç›®è„šæ‰‹æ¶çš„ä½œç”¨ã€‚</p>
<h2 id="2-ä¾èµ–åŒ…å®‰è£…"><a href="#2-ä¾èµ–åŒ…å®‰è£…" class="headerlink" title="2. ä¾èµ–åŒ…å®‰è£…"></a>2. ä¾èµ–åŒ…å®‰è£…</h2><p>ä¾èµ–ç®¡ç†æ˜¯ npm çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŸç†å°±æ˜¯æ‰§è¡Œ <code>npm install</code> ä» package.json ä¸­çš„ dependencies, devDependencies å°†ä¾èµ–åŒ…å®‰è£…åˆ°å½“å‰ç›®å½•çš„ ./node_modules æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<h3 id="2-1-packageå®šä¹‰"><a href="#2-1-packageå®šä¹‰" class="headerlink" title="2.1 packageå®šä¹‰"></a>2.1 packageå®šä¹‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸ªåŒ…æ—¶ï¼Œæ‰§è¡Œ <code>npm install &lt;package&gt;</code> å‘½ä»¤å³å¯ã€‚è¿™é‡Œçš„ç¬¬ä¸‰ä¸ªå‚æ•° package é€šå¸¸å°±æ˜¯æˆ‘ä»¬æ‰€è¦å®‰è£…çš„åŒ…åï¼Œé»˜è®¤é…ç½®ä¸‹ npm ä¼šä»é»˜è®¤çš„æº (Registry) ä¸­æŸ¥æ‰¾è¯¥åŒ…åå¯¹åº”çš„åŒ…åœ°å€ï¼Œå¹¶ä¸‹è½½å®‰è£…ã€‚ä½†åœ¨ npm çš„ä¸–ç•Œé‡Œï¼Œé™¤äº†ç®€å•çš„æŒ‡å®šåŒ…å, package è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæŒ‡å‘æœ‰æ•ˆåŒ…åçš„ http url/git url/æ–‡ä»¶å¤¹è·¯å¾„ã€‚</p>
<p>é˜…è¯» <a href="https://docs.npmjs.com/getting-started/packages#what-is-a-package-" target="_blank" rel="noopener">npmçš„æ–‡æ¡£</a>ï¼Œ æˆ‘ä»¬ä¼šå‘ç°package å‡†ç¡®çš„å®šä¹‰ï¼Œåªè¦ç¬¦åˆä»¥ä¸‹ a) åˆ° g) å…¶ä¸­ä¹‹ä¸€æ¡ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ª package:</p>
<table>
<thead>
<tr>
<th>#</th>
<th>è¯´æ˜</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody>
<tr>
<td>a)</td>
<td>ä¸€ä¸ªåŒ…å«äº†ç¨‹åºå’Œæè¿°è¯¥ç¨‹åºçš„ package.json æ–‡ä»¶ çš„ <strong>æ–‡ä»¶å¤¹</strong></td>
<td>./local-module/</td>
</tr>
<tr>
<td>b)</td>
<td>ä¸€ä¸ªåŒ…å«äº† (a) çš„ <strong>gzip å‹ç¼©æ–‡ä»¶</strong></td>
<td>./module.tar.gz</td>
</tr>
<tr>
<td>c)</td>
<td>ä¸€ä¸ªå¯ä»¥ä¸‹è½½å¾—åˆ° (b) èµ„æºçš„ <strong>url</strong> (é€šå¸¸æ˜¯ http(s) url)</td>
<td><a href="https://registry.npmjs.org/webpack/-/webpack-4.1.0.tgz" target="_blank" rel="noopener">https://registry.npmjs.org/webpack/-/webpack-4.1.0.tgz</a>  </td>
</tr>
<tr>
<td>d)</td>
<td>ä¸€ä¸ªæ ¼å¼ä¸º <code>&lt;name&gt;@&lt;version&gt;</code> çš„å­—ç¬¦ä¸²ï¼Œå¯æŒ‡å‘ npm æº(é€šå¸¸æ˜¯å®˜æ–¹æº npmjs.org)ä¸Šå·²å‘å¸ƒçš„å¯è®¿é—® urlï¼Œä¸”è¯¥ url æ»¡è¶³æ¡ä»¶ (c)</td>
<td><a href="mailto:webpack@4.1.0" target="_blank" rel="noopener">webpack@4.1.0</a>  </td>
</tr>
<tr>
<td>e)</td>
<td>ä¸€ä¸ªæ ¼å¼ä¸º <code>&lt;name&gt;@&lt;tag&gt;</code> çš„å­—ç¬¦ä¸²ï¼Œåœ¨ npm æºä¸Šè¯¥<code>&lt;tag&gt;</code>æŒ‡å‘æŸ <code>&lt;version&gt;</code> å¾—åˆ° <code>&lt;name&gt;@&lt;version&gt;</code>ï¼Œåè€…æ»¡è¶³æ¡ä»¶ (d)</td>
<td>webpack@latest </td>
</tr>
<tr>
<td>f)</td>
<td>ä¸€ä¸ªæ ¼å¼ä¸º <code>&lt;name&gt;</code> çš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤æ·»åŠ  <code>latest</code> æ ‡ç­¾æ‰€å¾—åˆ°çš„ <code>&lt;name&gt;@latest</code> æ»¡è¶³æ¡ä»¶ (e)</td>
<td>webpack  </td>
</tr>
<tr>
<td>g)</td>
<td>ä¸€ä¸ª <strong>git url</strong>, è¯¥ url æ‰€æŒ‡å‘çš„ä»£ç åº“æ»¡è¶³æ¡ä»¶ (a)</td>
<td><a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:webpack/webpack.git</td>
</tr>
</tbody>
</table>
<h3 id="2-2-å®‰è£…æœ¬åœ°åŒ…-è¿œç¨‹gitä»“åº“åŒ…"><a href="#2-2-å®‰è£…æœ¬åœ°åŒ…-è¿œç¨‹gitä»“åº“åŒ…" class="headerlink" title="2.2 å®‰è£…æœ¬åœ°åŒ…/è¿œç¨‹gitä»“åº“åŒ…"></a>2.2 å®‰è£…æœ¬åœ°åŒ…/è¿œç¨‹gitä»“åº“åŒ…</h3><p>ä¸Šé¢è¡¨æ ¼çš„å®šä¹‰æ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨å…±äº«ä¾èµ–åŒ…æ—¶ï¼Œå¹¶ä¸æ˜¯éè¦å°†åŒ…å‘è¡¨åˆ° npm æºä¸Šæ‰å¯ä»¥æä¾›ç»™ä½¿ç”¨è€…æ¥å®‰è£…ã€‚è¿™å¯¹äºç§æœ‰çš„ä¸æ–¹ä¾¿ publish åˆ°è¿œç¨‹æºï¼ˆå³ä½¿æ˜¯ç§æœ‰æºï¼‰ï¼Œæˆ–è€…éœ€è¦å¯¹æŸå®˜æ–¹æºè¿›è¡Œæ”¹é€ ï¼Œä½†ä¾ç„¶éœ€è¦æŠŠåŒ…å…±äº«å‡ºå»çš„åœºæ™¯æ¥è¯´éå¸¸å®ç”¨ã€‚</p>
<p><strong>åœºæ™¯1: æœ¬åœ°æ¨¡å—å¼•ç”¨</strong></p>
<p>nodejs åº”ç”¨å¼€å‘ä¸­ä¸å¯é¿å…æœ‰æ¨¡å—é—´è°ƒç”¨ï¼Œä¾‹å¦‚åœ¨å®è·µä¸­ç»å¸¸ä¼šæŠŠéœ€è¦è¢«é¢‘ç¹å¼•ç”¨çš„é…ç½®æ¨¡å—æ”¾åˆ°åº”ç”¨æ ¹ç›®å½•ï¼›äºæ˜¯åœ¨åˆ›å»ºäº†å¾ˆå¤šå±‚çº§çš„ç›®å½•ã€æ–‡ä»¶åï¼Œå¾ˆå¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„ä»£ç : </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'../../../../config.js'</span>);</span><br></pre></td></tr></table></figure>
<p>é™¤äº†çœ‹ä¸Šå»å¾ˆä¸‘ä»¥å¤–ï¼Œè¿™æ ·çš„è·¯å¾„å¼•ç”¨ä¹Ÿä¸åˆ©äºä»£ç çš„é‡æ„ã€‚å¹¶ä¸”èº«ä¸ºç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ ·é‡å¤çš„ä»£ç å¤šäº†ä¹Ÿå°±æ„å‘³ç€æ˜¯æ—¶å€™æŠŠè¿™ä¸ªæ¨¡å—åˆ†ç¦»å‡ºæ¥ä¾›åº”ç”¨å†…å…¶ä»–æ¨¡å—å…±äº«äº†ã€‚ä¾‹å¦‚è¿™ä¸ªä¾‹å­é‡Œçš„ config.js éå¸¸é€‚åˆå°è£…ä¸º package æ”¾åˆ° node_modules ç›®å½•ä¸‹ï¼Œå…±äº«ç»™åŒåº”ç”¨å†…å…¶ä»–æ¨¡å—ã€‚</p>
<p>æ— éœ€æ‰‹åŠ¨æ‹·è´æ–‡ä»¶æˆ–è€…åˆ›å»ºè½¯é“¾æ¥åˆ° node_modules ç›®å½•ï¼Œnpm æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li><p>åˆ›å»º config åŒ…:<br> æ–°å¢ config æ–‡ä»¶å¤¹; é‡å‘½å config.js ä¸º config/index.js æ–‡ä»¶; åˆ›å»º package.json å®šä¹‰ config åŒ…</p>
 <figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"config"</span>,</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.1.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨åº”ç”¨å±‚ package.json æ–‡ä»¶ä¸­æ–°å¢ä¾èµ–é¡¹ï¼Œç„¶åæ‰§è¡Œ <code>npm install</code>; æˆ–ç›´æ¥æ‰§è¡Œç¬¬ 3 æ­¥</p>
 <figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">        <span class="attr">"config"</span>: <span class="string">"file:./config"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ï¼ˆç­‰ä»·äºç¬¬ 2 æ­¥ï¼‰ç›´æ¥åœ¨åº”ç”¨ç›®å½•æ‰§è¡Œ <code>npm install file:./config</code></p>
<p> æ­¤æ—¶ï¼ŒæŸ¥çœ‹ <code>node_modules</code> ç›®å½•æˆ‘ä»¬ä¼šå‘ç°å¤šå‡ºæ¥ä¸€ä¸ªåä¸º <code>config</code>ï¼ŒæŒ‡å‘ä¸Šå±‚ <code>config/</code> æ–‡ä»¶å¤¹çš„è½¯é“¾æ¥ã€‚è¿™æ˜¯å› ä¸º npm è¯†åˆ« <code>file:</code> åè®®çš„urlï¼Œå¾—çŸ¥è¿™ä¸ªåŒ…éœ€è¦ç›´æ¥ä»æ–‡ä»¶ç³»ç»Ÿä¸­è·å–ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºè½¯é“¾æ¥åˆ° node_modules ä¸­ï¼Œå®Œæˆâ€œå®‰è£…â€è¿‡ç¨‹ã€‚</p>
<p> ç›¸æ¯”æ‰‹åŠ¨è½¯é“¾ï¼Œæˆ‘ä»¬æ—¢ä¸éœ€è¦å…³å¿ƒ windows å’Œ linux å‘½ä»¤å·®å¼‚ï¼Œåˆå¯ä»¥æ˜¾å¼åœ°å°†ä¾èµ–ä¿¡æ¯å›ºåŒ–åˆ° dependencies å­—æ®µä¸­ï¼Œå¼€å‘å›¢é˜Ÿå…¶ä»–æˆå‘˜å¯ä»¥æ‰§è¡Œ <code>npm install</code> åç›´æ¥ä½¿ç”¨ã€‚</p>
</li>
</ol>
<p><strong>åœºæ™¯2: ç§æœ‰ git å…±äº« package</strong></p>
<p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€ä¸ªå›¢é˜Ÿå†…ä¼šæœ‰ä¸€äº›ä»£ç /å…¬ç”¨åº“éœ€è¦åœ¨å›¢é˜Ÿå†…<strong>ä¸åŒé¡¹ç›®é—´</strong>å…±äº«ï¼Œä½†å¯èƒ½ç”±äºåŒ…å«äº†æ•æ„Ÿå†…å®¹ï¼Œæˆ–è€…ä»£ç å¤ªçƒ‚æ‹¿ä¸å‡ºæ‰‹ç­‰åŸå› ï¼Œä¸æ–¹ä¾¿å‘å¸ƒåˆ°æºã€‚</p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†è¢«ä¾èµ–çš„åŒ…æ‰˜ç®¡åœ¨ç§æœ‰çš„ git ä»“åº“ä¸­ï¼Œç„¶åå°†è¯¥  git url ä¿å­˜åˆ° dependencies ä¸­. npm ä¼šç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„ git å‘½ä»¤ä» git ä»“åº“æ‹‰å–åŒ…çš„å†…å®¹åˆ° node_modules ä¸­ã€‚</p>
<p><a href="https://docs.npmjs.com/files/package.json#git-urls-as-dependencies" target="_blank" rel="noopener">npm æ”¯æŒçš„ git url æ ¼å¼</a>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;protocol&gt;://[&lt;user&gt;[:&lt;password&gt;]@]&lt;hostname&gt;[:&lt;port&gt;][:][/]&lt;path&gt;[#&lt;commit-ish&gt; | #semver:&lt;semver&gt;]</span><br></pre></td></tr></table></figure>
<p>git è·¯å¾„åå¯ä»¥ä½¿ç”¨ # æŒ‡å®šç‰¹å®šçš„ git branch/commit/tag, ä¹Ÿå¯ä»¥ #semver: æŒ‡å®šç‰¹å®šçš„ semver range.</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git+ssh://git@github.com:npm/npm.git#v1.0.27</span><br><span class="line">git+ssh://git@github.com:npm/npm#semver:^5.0</span><br><span class="line">git+https://isaacs@github.com/npm/npm.git</span><br><span class="line">git://github.com/npm/npm.git#v1.0.27</span><br></pre></td></tr></table></figure>
<p><strong>åœºæ™¯3: å¼€æº package é—®é¢˜ä¿®å¤</strong></p>
<p>ä½¿ç”¨æŸä¸ª npm åŒ…æ—¶å‘ç°å®ƒæœ‰æŸä¸ªä¸¥é‡bugï¼Œä½†ä¹Ÿè®¸æœ€åˆä½œè€…å·²ä¸å†ç»´æŠ¤ä»£ç äº†ï¼Œä¹Ÿè®¸æˆ‘ä»¬å·¥ä½œç´§æ€¥ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ issue ç»™ä½œè€…å†æ…¢æ…¢ç­‰ä½œè€…å‘å¸ƒæ–°çš„ä¿®å¤ç‰ˆæœ¬åˆ° npm æºã€‚</p>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è¿›å…¥ node_modules ç›®å½•ä¸‹ä¿®æ”¹ç›¸åº”çš„åŒ…å†…å®¹ï¼Œä¹Ÿè®¸ä¿®æ”¹äº†ä¸€è¡Œä»£ç å°±ä¿®å¤äº†é—®é¢˜ã€‚ä½†æ˜¯è¿™ç§åšæ³•éå¸¸ä¸æ˜æ™ºï¼</p>
<p>é¦–å…ˆ node_modules æœ¬èº«ä¸åº”è¯¥æ”¾è¿›ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯¹ node_modules  æ–‡ä»¶å¤¹ä¸­å†…å®¹çš„ä¿®æ”¹ä¸ä¼šè¢«è®°å½•è¿› git æäº¤è®°å½•ï¼›å…¶æ¬¡ï¼Œå°±ç®—æˆ‘ä»¬éè¦åæ¨¡å¼ï¼ŒæŠŠ node_modules æ”¾è¿›ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œä½ çš„ä¿®æ”¹å†…å®¹ä¹Ÿå¾ˆå®¹æ˜“åœ¨ä¸‹æ¬¡ team ä¸­æŸä½æˆå‘˜æ‰§è¡Œ <code>npm install</code> æˆ– <code>npm update</code> æ—¶è¢«è¦†ç›–ï¼Œè€Œè¿™æ ·çš„ä¸€æ¬¡æäº¤å¾ˆå¯èƒ½åŒ…å«äº†å‡ åå‡ ç™¾ä¸ªåŒ…çš„æ›´æ–°ï¼Œä½ è‡ªå·±æ‰€åšçš„ä¿®æ”¹å¾ˆå®¹æ˜“å°±è¢«æ·¹æ²¡åœ¨åºå¤§çš„ diff æ–‡ä»¶åˆ—è¡¨ä¸­äº†ã€‚</p>
<p><strong>æ–¹æ¡ˆ</strong>:</p>
<p>æœ€å¥½çš„åŠæ³•åº”å½“æ˜¯ fork åŸä½œè€…çš„ git åº“ï¼Œåœ¨è‡ªå·±æ‰€å±çš„ repo ä¸‹ä¿®å¤é—®é¢˜åï¼Œå°† dependencies ä¸­ç›¸åº”çš„ä¾èµ–é¡¹æ›´æ”¹ä¸ºè‡ªå·±ä¿®å¤åç‰ˆæœ¬çš„ git url å³å¯è§£å†³é—®é¢˜ã€‚ï¼ˆFork ä»£ç åº“åï¼Œä¹Ÿä¾¿äºå‘åŸä½œè€…æäº¤ PR ä¿®å¤é—®é¢˜ã€‚ä¸Šæ¸¸ä»£ç åº“ä¿®å¤é—®é¢˜åï¼Œå†æ¬¡æ›´æ–°æˆ‘ä»¬çš„ä¾èµ–é…ç½®ä¹Ÿä¸è¿Ÿã€‚ï¼‰</p>
<h2 id="3-npm-install-å¦‚ä½•å·¥ä½œ-â€”â€”-node-modules-ç›®å½•ç»“æ„"><a href="#3-npm-install-å¦‚ä½•å·¥ä½œ-â€”â€”-node-modules-ç›®å½•ç»“æ„" class="headerlink" title="3. npm install å¦‚ä½•å·¥ä½œ â€”â€” node_modules ç›®å½•ç»“æ„"></a>3. npm install å¦‚ä½•å·¥ä½œ â€”â€” node_modules ç›®å½•ç»“æ„</h2><p>npm install æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ node_modules ä¸­çœ‹åˆ°æ‰€æœ‰ä¾èµ–çš„åŒ…ã€‚è™½ç„¶ä½¿ç”¨è€…æ— éœ€å…³æ³¨è¿™ä¸ªç›®å½•é‡Œçš„æ–‡ä»¶å¤¹ç»“æ„ç»†èŠ‚ï¼Œåªç®¡åœ¨ä¸šåŠ¡ä»£ç ä¸­å¼•ç”¨ä¾èµ–åŒ…å³å¯ï¼Œä½†äº†è§£ node_modules çš„å†…å®¹å¯ä»¥å¸®æˆ‘ä»¬æ›´å¥½ç†è§£ npm å¦‚ä½•å·¥ä½œï¼Œäº†è§£ä» npm 2 åˆ° npm 5 æœ‰å“ªäº›å˜åŒ–å’Œæ”¹è¿›ã€‚</p>
<p>ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾åº”ç”¨ç›®å½•ä¸º app, ç”¨ä¸¤ä¸ªæµè¡Œçš„åŒ… <code>webpack</code>, <code>nconf</code> ä½œä¸ºä¾èµ–åŒ…åšç¤ºä¾‹è¯´æ˜ã€‚å¹¶ä¸”ä¸ºäº†æ­£å¸¸å®‰è£…ï¼Œä½¿ç”¨äº†â€œä¸Šå¤â€ npm 2 æ—¶æœŸçš„ç‰ˆæœ¬ <a href="mailto:`webpack@1.15.0" target="_blank" rel="noopener">`webpack@1.15.0</a><code>,</code><a href="mailto:nconf@0.8.5" target="_blank" rel="noopener">nconf@0.8.5</a>`.</p>
<h3 id="3-1-npm-2"><a href="#3-1-npm-2" class="headerlink" title="3.1 npm 2"></a>3.1 npm 2</h3><p>npm 2 åœ¨å®‰è£…ä¾èµ–åŒ…æ—¶ï¼Œé‡‡ç”¨ç®€å•çš„é€’å½’å®‰è£…æ–¹æ³•ã€‚æ‰§è¡Œ <code>npm install</code> åï¼Œnpm 2 ä¾æ¬¡é€’å½’å®‰è£… <code>webpack</code> å’Œ <code>nconf</code> ä¸¤ä¸ªåŒ…åˆ° node_modules ä¸­ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° ./node_modules è¿™å±‚ç›®å½•åªå«æœ‰è¿™ä¸¤ä¸ªå­ç›®å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node_modules/</span><br><span class="line">â”œâ”€â”€ nconf/</span><br><span class="line">â””â”€â”€ webpack/</span><br></pre></td></tr></table></figure>
<p>è¿›å…¥æ›´æ·±ä¸€å±‚ nconf æˆ– webpack ç›®å½•ï¼Œå°†çœ‹åˆ°è¿™ä¸¤ä¸ªåŒ…å„è‡ªçš„ node_modules ä¸­ï¼Œå·²ç»ç”± npm é€’å½’åœ°å®‰è£…å¥½è‡ªèº«çš„ä¾èµ–åŒ…ã€‚åŒ…æ‹¬ <code>./node_modules/webpack/node_modules/webpack-core</code> , <code>./node_modules/conf/node_modules/async</code> ç­‰ç­‰ã€‚è€Œæ¯ä¸€ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ä¾èµ–åŒ…ï¼Œæ¯ä¸ªåŒ…è‡ªå·±çš„ä¾èµ–éƒ½å®‰è£…åœ¨äº†è‡ªå·±çš„ node_modules ä¸­ã€‚ä¾èµ–å…³ç³»å±‚å±‚é€’è¿›ï¼Œæ„æˆäº†ä¸€æ•´ä¸ªä¾èµ–æ ‘ï¼Œè¿™ä¸ªä¾èµ–æ ‘ä¸æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ç»“æ„æ ‘åˆšå¥½å±‚å±‚å¯¹åº”ã€‚</p>
<p>æœ€æ–¹ä¾¿çš„æŸ¥çœ‹ä¾èµ–æ ‘çš„æ–¹å¼æ˜¯ç›´æ¥åœ¨ app ç›®å½•ä¸‹æ‰§è¡Œ <code>npm ls</code> å‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">app@0.1.0</span><br><span class="line">â”œâ”€â”¬ nconf@0.8.5</span><br><span class="line">â”‚ â”œâ”€â”€ async@1.5.2</span><br><span class="line">â”‚ â”œâ”€â”€ ini@1.3.5</span><br><span class="line">â”‚ â”œâ”€â”€ secure-keys@1.0.0</span><br><span class="line">â”‚ â””â”€â”€ yargs@3.32.0</span><br><span class="line">â””â”€â”¬ webpack@1.15.0</span><br><span class="line">  â”œâ”€â”€ acorn@3.3.0</span><br><span class="line">  â”œâ”€â”€ async@1.5.2</span><br><span class="line">  â”œâ”€â”€ clone@1.0.3</span><br><span class="line">  â”œâ”€â”€ ...</span><br><span class="line">  â”œâ”€â”€ optimist@0.6.1</span><br><span class="line">  â”œâ”€â”€ supports-color@3.2.3</span><br><span class="line">  â”œâ”€â”€ tapable@0.1.10</span><br><span class="line">  â”œâ”€â”€ uglify-js@2.7.5</span><br><span class="line">  â”œâ”€â”€ watchpack@0.2.9</span><br><span class="line">  â””â”€â”¬ webpack-core@0.6.9</span><br><span class="line">    â”œâ”€â”€ source-list-map@0.1.8</span><br><span class="line">    â””â”€â”€ source-map@0.4.4</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„ç›®å½•ç»“æ„ä¼˜ç‚¹åœ¨äºå±‚çº§ç»“æ„æ˜æ˜¾ï¼Œä¾¿äºè¿›è¡Œå‚»ç“œå¼çš„ç®¡ç†:</p>
<ol>
<li>ä¾‹å¦‚æ–°è£…ä¸€ä¸ªä¾èµ–åŒ…ï¼Œå¯ä»¥ç«‹å³åœ¨ç¬¬ä¸€å±‚ node_modules ä¸­çœ‹åˆ°å­ç›®å½•</li>
<li>åœ¨å·²çŸ¥æ‰€éœ€åŒ…åå’Œç‰ˆæœ¬å·æ—¶ï¼Œç”šè‡³å¯ä»¥ä»åˆ«çš„æ–‡ä»¶å¤¹æ‰‹åŠ¨æ‹·è´éœ€è¦çš„åŒ…åˆ° node_modules æ–‡ä»¶å¤¹ä¸­ï¼Œå†æ‰‹åŠ¨ä¿®æ”¹ package.json ä¸­çš„ä¾èµ–é…ç½®</li>
<li>è¦åˆ é™¤è¿™ä¸ªåŒ…ï¼Œä¹Ÿå¯ä»¥ç®€å•åœ°æ‰‹åŠ¨åˆ é™¤è¿™ä¸ªåŒ…çš„å­ç›®å½•ï¼Œå¹¶åˆ é™¤ package.json æ–‡ä»¶ä¸­ç›¸åº”çš„ä¸€è¡Œå³å¯</li>
</ol>
<p>å®é™…ä¸Šï¼Œå¾ˆå¤šäººåœ¨ npm 2 æ—¶ä»£ä¹Ÿçš„ç¡®éƒ½è¿™ä¹ˆå®è·µè¿‡ï¼Œçš„ç¡®ä¹Ÿéƒ½å¯ä»¥å®‰è£…å’Œåˆ é™¤æˆåŠŸï¼Œå¹¶ä¸ä¼šå¯¼è‡´ä»€ä¹ˆå·®é”™ã€‚</p>
<p>ä½†è¿™æ ·çš„æ–‡ä»¶ç»“æ„ä¹Ÿæœ‰å¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼š</p>
<ol>
<li>å¯¹å¤æ‚çš„å·¥ç¨‹, node_modules å†…ç›®å½•ç»“æ„å¯èƒ½ä¼šå¤ªæ·±ï¼Œå¯¼è‡´æ·±å±‚çš„æ–‡ä»¶è·¯å¾„è¿‡é•¿è€Œè§¦å‘ windows æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶è·¯å¾„ä¸èƒ½è¶…è¿‡ 260 ä¸ªå­—ç¬¦é•¿çš„é”™è¯¯ </li>
<li>éƒ¨åˆ†è¢«å¤šä¸ªåŒ…æ‰€ä¾èµ–çš„åŒ…ï¼Œå¾ˆå¯èƒ½åœ¨åº”ç”¨ node_modules ç›®å½•ä¸­çš„å¾ˆå¤šåœ°æ–¹è¢«é‡å¤å®‰è£…ã€‚éšç€å·¥ç¨‹è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œä¾èµ–æ ‘è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿™æ ·çš„åŒ…æƒ…å†µä¼šè¶Šæ¥è¶Šå¤šï¼Œé€ æˆå¤§é‡çš„å†—ä½™ã€‚</li>
</ol>
<p>â€”â€”åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­å°±æœ‰è¿™ä¸ªé—®é¢˜ï¼Œ<code>webpack</code> å’Œ <code>nconf</code> éƒ½ä¾èµ– <code>async</code> è¿™ä¸ªåŒ…ï¼Œæ‰€ä»¥åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œwebpack å’Œ nconf çš„ node_modules å­ç›®å½•ä¸­éƒ½å®‰è£…äº†ç›¸åŒçš„ async åŒ…ï¼Œå¹¶ä¸”æ˜¯ç›¸åŒçš„ç‰ˆæœ¬ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+-------------------------------------------+</span><br><span class="line">|                   app/                    |</span><br><span class="line">+----------+------------------------+-------+</span><br><span class="line">           |                        |</span><br><span class="line">           |                        |</span><br><span class="line">+----------v------+       +---------v-------+</span><br><span class="line">|                 |       |                 |</span><br><span class="line">|  webpack@1.15.0 |       |  nconf@0.8.5    |</span><br><span class="line">|                 |       |                 |</span><br><span class="line">+--------+--------+       +--------+--------+</span><br><span class="line">         |                         |</span><br><span class="line">   +-----v-----+             +-----v-----+</span><br><span class="line">   |async@1.5.2|             |async@1.5.2|</span><br><span class="line">   +-----------+             +-----------+</span><br></pre></td></tr></table></figure>
<h3 id="3-2-npm-3-æ‰å¹³ç»“æ„"><a href="#3-2-npm-3-æ‰å¹³ç»“æ„" class="headerlink" title="3.2 npm 3 - æ‰å¹³ç»“æ„"></a>3.2 npm 3 - æ‰å¹³ç»“æ„</h3><p>ä¸»è¦ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œnpm 3 çš„ node_modules ç›®å½•æ”¹æˆäº†æ›´åŠ æ‰å¹³çŠ¶çš„å±‚çº§ç»“æ„ã€‚æ–‡ä»¶ç³»ç»Ÿä¸­ <code>webpack</code>, <code>nconf</code>, <code>async</code> çš„å±‚çº§å…³ç³»å˜æˆäº†å¹³çº§å…³ç³»ï¼Œå¤„äºåŒä¸€çº§ç›®å½•ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">         +-------------------------------------------+</span><br><span class="line">         |                   app/                    |</span><br><span class="line">         +-+---------------------------------------+-+</span><br><span class="line">           |                                       |</span><br><span class="line">           |                                       |</span><br><span class="line">+----------v------+    +-------------+   +---------v-------+</span><br><span class="line">|                 |    |             |   |                 |</span><br><span class="line">|  webpack@1.15.0 |    | async@1.5.2 |   |  nconf@0.8.5    |</span><br><span class="line">|                 |    |             |   |                 |</span><br><span class="line">+-----------------+    +-------------+   +-----------------+</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™æ ·ä¸€æ¥ webpack/node_modules å’Œ nconf/node_modules ä¸­éƒ½ä¸å†æœ‰ async æ–‡ä»¶å¤¹ï¼Œä½†å¾—ç›Šäº node çš„æ¨¡å—åŠ è½½æœºåˆ¶ï¼Œä»–ä»¬éƒ½å¯ä»¥åœ¨ä¸Šä¸€çº§ node_modules ç›®å½•ä¸­æ‰¾åˆ° async åº“ã€‚æ‰€ä»¥ webpack å’Œ nconf çš„åº“ä»£ç ä¸­ <code>require(&#39;async&#39;)</code> è¯­å¥çš„æ‰§è¡Œéƒ½ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚</p>
<p>è¿™åªæ˜¯æœ€ç®€å•çš„ä¾‹å­ï¼Œå®é™…çš„å·¥ç¨‹é¡¹ç›®ä¸­ï¼Œä¾èµ–æ ‘ä¸å¯é¿å…åœ°ä¼šæœ‰å¾ˆå¤šå±‚çº§ï¼Œå¾ˆå¤šä¾èµ–åŒ…ï¼Œå…¶ä¸­ä¼šæœ‰å¾ˆå¤šåŒåä½†ç‰ˆæœ¬ä¸åŒçš„åŒ…å­˜åœ¨äºä¸åŒçš„ä¾èµ–å±‚çº§ï¼Œå¯¹è¿™äº›å¤æ‚çš„æƒ…å†µ, npm 3 éƒ½ä¼šåœ¨å®‰è£…æ—¶éå†æ•´ä¸ªä¾èµ–æ ‘ï¼Œè®¡ç®—å‡ºæœ€åˆç†çš„æ–‡ä»¶å¤¹å®‰è£…æ–¹å¼ï¼Œä½¿å¾—æ‰€æœ‰è¢«é‡å¤ä¾èµ–çš„åŒ…éƒ½å¯ä»¥å»é‡å®‰è£…ã€‚</p>
<p>npm æ–‡æ¡£æä¾›äº†æ›´ç›´è§‚çš„ä¾‹å­è§£é‡Šè¿™ç§æƒ…å†µï¼š</p>
<blockquote>
<p>å‡å¦‚ <code>package{dep}</code> å†™æ³•ä»£è¡¨åŒ…å’ŒåŒ…çš„ä¾èµ–ï¼Œé‚£ä¹ˆ  <code>A{B,C}</code>, <code>B{C}</code>, <code>C{D}</code> çš„ä¾èµ–ç»“æ„åœ¨å®‰è£…ä¹‹åçš„ node_modules æ˜¯è¿™æ ·çš„ç»“æ„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A</span><br><span class="line">+-- B</span><br><span class="line">+-- C</span><br><span class="line">+-- D</span><br></pre></td></tr></table></figure>
</blockquote>
<p>è¿™é‡Œä¹‹æ‰€ä»¥ D ä¹Ÿå®‰è£…åˆ°äº†ä¸ B C åŒä¸€çº§ç›®å½•ï¼Œæ˜¯å› ä¸º npm ä¼šé»˜è®¤ä¼šåœ¨æ— å†²çªçš„å‰æä¸‹ï¼Œå°½å¯èƒ½å°†åŒ…å®‰è£…åˆ°è¾ƒé«˜çš„å±‚çº§ã€‚</p>
<blockquote>
<p>å¦‚æœæ˜¯ <code>A{B,C}</code>, <code>B{C,D@1}</code>, <code>C{D@2}</code> çš„ä¾èµ–å…³ç³»ï¼Œå¾—åˆ°çš„å®‰è£…åç»“æ„æ˜¯ï¼š</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A</span><br><span class="line">+-- B</span><br><span class="line">+-- C</span><br><span class="line">   `-- D@2</span><br><span class="line">+-- D@1</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯å› ä¸ºï¼Œå¯¹äº npm æ¥è¯´åŒåä½†ä¸åŒç‰ˆæœ¬çš„åŒ…æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„åŒ…ï¼Œè€ŒåŒå±‚ä¸èƒ½æœ‰ä¸¤ä¸ªåŒåå­ç›®å½•ï¼Œæ‰€ä»¥å…¶ä¸­çš„ D@2 æ”¾åˆ°äº† C çš„å­ç›®å½•è€Œå¦ä¸€ä¸ª D@1 è¢«æ”¾åˆ°äº†å†ä¸Šä¸€å±‚ç›®å½•ã€‚</p>
<p>å¾ˆæ˜æ˜¾åœ¨ npm 3 ä¹‹å npm çš„ä¾èµ–æ ‘ç»“æ„ä¸å†ä¸æ–‡ä»¶å¤¹å±‚çº§ä¸€ä¸€å¯¹åº”äº†ã€‚æƒ³è¦æŸ¥çœ‹ app çš„ç›´æ¥ä¾èµ–é¡¹ï¼Œè¦é€šè¿‡ <code>npm ls</code> å‘½ä»¤æŒ‡å®š <code>--depth</code> å‚æ•°æ¥æŸ¥çœ‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm ls --depth 1</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PS: ä¸æœ¬åœ°ä¾èµ–åŒ…ä¸åŒï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡ <code>npm install --global</code> å…¨å±€å®‰è£…åŒ…åˆ°å…¨å±€ç›®å½•æ—¶ï¼Œå¾—åˆ°çš„ç›®å½•ä¾ç„¶æ˜¯â€œä¼ ç»Ÿçš„â€ç›®å½•ç»“æ„ã€‚è€Œå¦‚æœä½¿ç”¨ npm 3 æƒ³è¦å¾—åˆ°â€œä¼ ç»Ÿâ€å½¢å¼çš„æœ¬åœ° node_modules ç›®å½•ï¼Œä½¿ç”¨ <code>npm install --global-style</code> å‘½ä»¤å³å¯ã€‚</p>
</blockquote>
<h3 id="3-3-npm-5-package-lock-æ–‡ä»¶"><a href="#3-3-npm-5-package-lock-æ–‡ä»¶" class="headerlink" title="3.3 npm 5 - package-lock æ–‡ä»¶"></a>3.3 npm 5 - package-lock æ–‡ä»¶</h3><p>npm 5 å‘å¸ƒäº 2017 å¹´ä¹Ÿæ˜¯ç›®å‰æœ€æ–°çš„ npm ç‰ˆæœ¬ï¼Œè¿™ä¸€ç‰ˆæœ¬ä¾ç„¶æ²¿ç”¨ npm 3 ä¹‹åæ‰å¹³åŒ–çš„ä¾èµ–åŒ…å®‰è£…æ–¹å¼ï¼Œæ­¤å¤–æœ€å¤§çš„å˜åŒ–æ˜¯å¢åŠ äº† <code>package-lock.json</code> æ–‡ä»¶ã€‚</p>
<p>package-lock.json çš„ä½œç”¨æ˜¯<strong>é”å®š</strong>ä¾èµ–å®‰è£…ç»“æ„ï¼Œå¦‚æœæŸ¥çœ‹è¿™ä¸ª json çš„ç»“æ„ï¼Œä¼šå‘ç°ä¸ node_modules ç›®å½•çš„æ–‡ä»¶å±‚çº§ç»“æ„æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p>
<p>ä»¥ä¾èµ–å…³ç³»ä¸º: <code>app{webpack}</code> çš„ â€˜appâ€™ é¡¹ç›®ä¸ºä¾‹, å…¶ package-lock æ–‡ä»¶åŒ…å«äº†è¿™æ ·çš„ç‰‡æ®µã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>:  <span class="string">"app"</span>,</span><br><span class="line">    <span class="attr">"version"</span>:  <span class="string">"0.1.0"</span>,</span><br><span class="line">    <span class="attr">"lockfileVersion"</span>:  <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"requires"</span>:  <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">        // ... å…¶ä»–ä¾èµ–åŒ…</span><br><span class="line">        "webpack": &#123;</span><br><span class="line">            "version": "1.8.11",</span><br><span class="line">            "resolved": "https://registry.npmjs.org/webpack/-/webpack-1.8.11.tgz",</span><br><span class="line">            "integrity": "sha1-Yu0hnstBy/qcKuanu6laSYtgkcI=",</span><br><span class="line">            "requires": &#123;</span><br><span class="line">                "async": "0.9.2",</span><br><span class="line">                "clone": "0.1.19",</span><br><span class="line">                "enhanced-resolve": "0.8.6",</span><br><span class="line">                "esprima": "1.2.5",</span><br><span class="line">                "interpret": "0.5.2",</span><br><span class="line">                "memory-fs": "0.2.0",</span><br><span class="line">                "mkdirp": "0.5.1",</span><br><span class="line">                "node-libs-browser": "0.4.3",</span><br><span class="line">                "optimist": "0.6.1",</span><br><span class="line">                "supports-color": "1.3.1",</span><br><span class="line">                "tapable": "0.1.10",</span><br><span class="line">                "uglify-js": "2.4.24",</span><br><span class="line">                "watchpack": "0.2.9",</span><br><span class="line">                "webpack-core": "0.6.9"</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        "webpack-core": &#123;</span><br><span class="line">            "version": "0.6.9",</span><br><span class="line">            "resolved": "https://registry.npmjs.org/webpack-core/-/webpack-core-0.6.9.tgz",</span><br><span class="line">            "integrity": "sha1-/FcViMhVjad76e+23r3Fo7FyvcI=",</span><br><span class="line">            "requires": &#123;</span><br><span class="line">                "source-list-map": "0.1.8",</span><br><span class="line">                "source-map": "0.4.4"</span><br><span class="line">            &#125;,</span><br><span class="line">            "dependencies": &#123;</span><br><span class="line">                "source-map": &#123;</span><br><span class="line">                    "version": "0.4.4",</span><br><span class="line">                    "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.4.4.tgz",</span><br><span class="line">                    "integrity": "sha1-66T12pwNyZneaAMti092FzZSA2s=",</span><br><span class="line">                    "requires": &#123;</span><br><span class="line">                        "amdefine": "1.0.1"</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        //... å…¶ä»–ä¾èµ–åŒ…</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹æ‡‚ package-lock æ–‡ä»¶å¹¶ä¸éš¾ï¼Œå…¶ç»“æ„æ˜¯åŒæ ·ç±»å‹çš„å‡ ä¸ªå­—æ®µåµŒå¥—èµ·æ¥çš„ï¼Œä¸»è¦æ˜¯ <code>version</code>, <code>resolved</code>, <code>integrity</code>, <code>requires</code>, <code>dependencies</code> è¿™å‡ ä¸ªå­—æ®µè€Œå·²ã€‚</p>
<ul>
<li><code>version</code>, <code>resolved</code>, <code>integrity</code> ç”¨æ¥è®°å½•åŒ…çš„å‡†ç¡®ç‰ˆæœ¬å·ã€å†…å®¹hashã€å®‰è£…æºçš„ï¼Œå†³å®šäº†è¦å®‰è£…çš„åŒ…çš„å‡†ç¡®â€œèº«ä»½â€ä¿¡æ¯</li>
<li>å‡è®¾ç›–ä½å…¶ä»–å­—æ®µï¼Œåªå…³æ³¨æ–‡ä»¶ä¸­çš„ <code>dependencies: {}</code> æˆ‘ä»¬ä¼šå‘ç°ï¼Œæ•´ä¸ªæ–‡ä»¶çš„ JSON é…ç½®é‡Œçš„ dependencies å±‚æ¬¡ç»“æ„ä¸æ–‡ä»¶ç³»ç»Ÿä¸­ node_modules çš„æ–‡ä»¶å¤¹å±‚æ¬¡ç»“æ„æ˜¯å®Œå…¨å¯¹ç…§çš„</li>
<li>åªå…³æ³¨ <code>requires: {}</code> å­—æ®µåˆä¼šå‘ç°ï¼Œé™¤æœ€å¤–å±‚çš„ <code>requires</code> å±æ€§ä¸º true ä»¥å¤–, å…¶ä»–å±‚çš„ requires å±æ€§éƒ½å¯¹åº”ç€è¿™ä¸ªåŒ…çš„ package.json é‡Œè®°å½•çš„è‡ªå·±çš„ä¾èµ–é¡¹</li>
</ul>
<p>å› ä¸ºè¿™ä¸ªæ–‡ä»¶è®°å½•äº† node_modules é‡Œæ‰€æœ‰åŒ…çš„ç»“æ„ã€å±‚çº§å’Œç‰ˆæœ¬å·ç”šè‡³å®‰è£…æºï¼Œå®ƒä¹Ÿå°±äº‹å®ä¸Šæä¾›äº† â€œä¿å­˜â€ node_modules çŠ¶æ€çš„èƒ½åŠ›ã€‚åªè¦æœ‰è¿™æ ·ä¸€ä¸ª lock æ–‡ä»¶ï¼Œä¸ç®¡åœ¨é‚£ä¸€å°æœºå™¨ä¸Šæ‰§è¡Œ npm install éƒ½ä¼šå¾—åˆ°å®Œå…¨ç›¸åŒçš„ node_modules ç»“æœã€‚</p>
<p>è¿™å°±æ˜¯ package-lock æ–‡ä»¶è‡´åŠ›äºä¼˜åŒ–çš„åœºæ™¯ï¼šåœ¨ä»å‰ä»…ä»…ç”¨ package.json è®°å½•ä¾èµ–ï¼Œç”±äº semver range çš„æœºåˆ¶ï¼›ä¸€ä¸ªæœˆå‰ç”± A ç”Ÿæˆçš„ package.json æ–‡ä»¶ï¼ŒB åœ¨ä¸€ä¸ªæœˆåæ ¹æ®å®ƒæ‰§è¡Œ npm install æ‰€å¾—åˆ°çš„ node_modules ç»“æœå¾ˆå¯èƒ½è®¸å¤šåŒ…éƒ½å­˜åœ¨ä¸åŒçš„å·®å¼‚ï¼Œè™½ç„¶ semver æœºåˆ¶çš„é™åˆ¶ä½¿å¾—åŒä¸€ä»½ package.json ä¸ä¼šå¾—åˆ°å¤§ç‰ˆæœ¬ä¸åŒçš„ä¾èµ–åŒ…ï¼Œä½†åŒä¸€ä»½ä»£ç åœ¨ä¸åŒç¯å¢ƒå®‰è£…å‡ºä¸åŒçš„ä¾èµ–åŒ…ï¼Œä¾ç„¶æ˜¯å¯èƒ½å¯¼è‡´æ„å¤–çš„æ½œåœ¨å› ç´ ã€‚</p>
<p>ç›¸åŒä½œç”¨çš„æ–‡ä»¶åœ¨ npm 5 ä¹‹å‰å°±æœ‰ï¼Œç§°ä¸º npm shrinkwrap æ–‡ä»¶ï¼ŒäºŒè€…ä½œç”¨å®Œå…¨ç›¸åŒï¼Œä¸åŒçš„æ˜¯åè€…éœ€è¦æ‰‹åŠ¨ç”Ÿæˆï¼Œè€Œ npm 5 é»˜è®¤ä¼šåœ¨æ‰§è¡Œ npm install åå°±ç”Ÿæˆ package-lock æ–‡ä»¶ï¼Œå¹¶ä¸”å»ºè®®ä½ æäº¤åˆ° git/svn ä»£ç åº“ä¸­ã€‚</p>
<p>package-lock.json æ–‡ä»¶åœ¨æœ€åˆ npm 5.0 é»˜è®¤å¼•å…¥æ—¶ä¹Ÿå¼•èµ·äº†ç›¸å½“å¤§çš„<a href="https://github.com/npm/npm/issues/16866" target="_blank" rel="noopener">äº‰è®®</a>ã€‚åœ¨ npm 5.0 ä¸­ï¼Œå¦‚æœå·²æœ‰ package-lock æ–‡ä»¶å­˜åœ¨ï¼Œè‹¥æ‰‹åŠ¨åœ¨ package.json æ–‡ä»¶æ–°å¢ä¸€æ¡ä¾èµ–ï¼Œå†æ‰§è¡Œ npm install, æ–°å¢çš„ä¾èµ–å¹¶ä¸ä¼šè¢«å®‰è£…åˆ° node_modules ä¸­, package-lock.json ä¹Ÿä¸ä¼šåšç›¸åº”çš„æ›´æ–°ã€‚è¿™æ ·çš„è¡¨ç°ä¸ä½¿ç”¨è€…çš„è‡ªç„¶æœŸæœ›è¡¨ç°ä¸ç¬¦ã€‚åœ¨ npm 5.1 çš„é¦–ä¸ª <a href="https://github.com/npm/npm/issues/16866" target="_blank" rel="noopener">Release</a> ç‰ˆæœ¬ä¸­è¿™ä¸ªé—®é¢˜å¾—ä»¥ä¿®å¤ã€‚è¿™ä¸ªäº‹æƒ…å‘Šè¯‰æˆ‘ä»¬ï¼Œè¦å‡çº§ï¼Œä¸è¦ä½¿ç”¨ 5.0ã€‚</p>
<p>â€”â€”ä½†ä¾ç„¶æœ‰åå¯¹çš„å£°éŸ³è®¤ä¸º package-lock å¤ªå¤æ‚ï¼Œå¯¹æ­¤ npm ä¹Ÿæä¾›äº†ç¦ç”¨é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm config set package-lock false</span><br></pre></td></tr></table></figure>
<h2 id="4-ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†"><a href="#4-ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="4. ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†"></a>4. ä¾èµ–åŒ…ç‰ˆæœ¬ç®¡ç†</h2><p>ä¾èµ–åŒ…å®‰è£…å®Œå¹¶ä¸æ„å‘³ç€å°±ä¸‡äº‹å¤§å‰äº†ï¼Œç‰ˆæœ¬çš„ç»´æŠ¤å’Œæ›´æ–°ä¹Ÿå¾ˆé‡è¦ã€‚è¿™ä¸€ç« ä»‹ç»ä¾èµ–åŒ…å‡çº§ç®¡ç†ç›¸å…³çŸ¥è¯†ï¼Œå¤ªé•¿ä¸çœ‹ç‰ˆæœ¬è¯·ç›´æ¥è·³åˆ° <a href="#4-3-æœ€ä½³å®è·µ">4.3 æœ€ä½³å®è·µ</a></p>
<h3 id="4-1-semver"><a href="#4-1-semver" class="headerlink" title="4.1 semver"></a>4.1 semver</h3><p>npm ä¾èµ–ç®¡ç†çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯é‡‡ç”¨äº†<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener">è¯­ä¹‰åŒ–ç‰ˆæœ¬ (semver)</a> è§„èŒƒï¼Œä½œä¸ºä¾èµ–<strong>ç‰ˆæœ¬</strong>ç®¡ç†æ–¹æ¡ˆã€‚</p>
<p>semver çº¦å®šä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬å·å¿…é¡»åŒ…å«3ä¸ªæ•°å­—ï¼Œæ ¼å¼å¿…é¡»ä¸º <code>MAJOR.MINOR.PATCH</code>, æ„ä¸º <code>ä¸»ç‰ˆæœ¬å·.å°ç‰ˆæœ¬å·.ä¿®è®¢ç‰ˆæœ¬å·</code>.</p>
<ul>
<li>MAJOR å¯¹åº”å¤§çš„ç‰ˆæœ¬å·è¿­ä»£ï¼Œåšäº†ä¸å…¼å®¹æ—§ç‰ˆçš„ä¿®æ”¹æ—¶è¦æ›´æ–° MAJOR ç‰ˆæœ¬å·</li>
<li>MINOR å¯¹åº”å°ç‰ˆæœ¬è¿­ä»£ï¼Œå‘ç”Ÿå…¼å®¹æ—§ç‰ˆAPIçš„ä¿®æ”¹æˆ–åŠŸèƒ½æ›´æ–°æ—¶ï¼Œæ›´æ–°MINORç‰ˆæœ¬å·</li>
<li>PATCH å¯¹åº”ä¿®è®¢ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬é’ˆå¯¹ä¿®å¤ BUG çš„ç‰ˆæœ¬å·</li>
</ul>
<p>å¯¹äºåŒ…ä½œè€…ï¼ˆå‘å¸ƒè€…ï¼‰ï¼Œnpm è¦æ±‚åœ¨ publish ä¹‹å‰ï¼Œå¿…é¡»æ›´æ–°ç‰ˆæœ¬å·ã€‚npm æä¾›äº† <code>npm version</code> å·¥å…·ï¼Œæ‰§è¡Œ <code>npm version major|minor|patch</code> å¯ä»¥ç®€å•åœ°å°†ç‰ˆæœ¬å·ä¸­ç›¸åº”çš„æ•°å­—åŠ 1.</p>
<blockquote>
<p>å¦‚æœåŒ…æ˜¯ä¸€ä¸ª git ä»“åº“ï¼Œ<code>npm version</code> è¿˜ä¼šè‡ªåŠ¨åˆ›å»ºä¸€æ¡æ³¨é‡Šä¸ºæ›´æ–°åç‰ˆæœ¬å·çš„ git commit å’Œåä¸ºè¯¥ç‰ˆæœ¬å·çš„ tag</p>
</blockquote>
<p>å¯¹äºåŒ…çš„å¼•ç”¨è€…æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ dependencies ä¸­ä½¿ç”¨ semver çº¦å®šçš„ semver range æŒ‡å®šæ‰€éœ€ä¾èµ–åŒ…çš„ç‰ˆæœ¬å·æˆ–ç‰ˆæœ¬èŒƒå›´ã€‚npm æä¾›äº†ç½‘ç«™ <a href="https://semver.npmjs.com" target="_blank" rel="noopener">https://semver.npmjs.com</a> å¯æ–¹ä¾¿åœ°è®¡ç®—æ‰€è¾“å…¥çš„è¡¨è¾¾å¼çš„åŒ¹é…èŒƒå›´ã€‚å¸¸ç”¨çš„è§„åˆ™ç¤ºä¾‹å¦‚ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>range</th>
<th>å«ä¹‰</th>
<th>ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>^2.2.1</code></td>
<td>æŒ‡å®šçš„ MAJOR ç‰ˆæœ¬å·ä¸‹, æ‰€æœ‰<strong>æ›´æ–°</strong>çš„ç‰ˆæœ¬</td>
<td>åŒ¹é… <code>2.2.3</code>, <code>2.3.0</code>; ä¸åŒ¹é… <code>1.0.3</code>, <code>3.0.1</code></td>
</tr>
<tr>
<td><code>~2.2.1</code></td>
<td>æŒ‡å®š MAJOR.MINOR ç‰ˆæœ¬å·ä¸‹ï¼Œæ‰€æœ‰<strong>æ›´æ–°</strong>çš„ç‰ˆæœ¬</td>
<td>åŒ¹é… <code>2.2.3</code>, <code>2.2.9</code> ; ä¸åŒ¹é… <code>2.3.0</code>, <code>2.4.5</code></td>
</tr>
<tr>
<td><code>&gt;=2.1</code></td>
<td>ç‰ˆæœ¬å·å¤§äºæˆ–ç­‰äº <code>2.1.0</code></td>
<td>åŒ¹é… <code>2.1.2</code>, <code>3.1</code></td>
</tr>
<tr>
<td><code>&lt;=2.2</code></td>
<td>ç‰ˆæœ¬å·å°äºæˆ–ç­‰äº <code>2.2</code></td>
<td>åŒ¹é… <code>1.0.0</code>, <code>2.2.1</code>, <code>2.2.11</code></td>
</tr>
<tr>
<td><code>1.0.0 - 2.0.0</code></td>
<td>ç‰ˆæœ¬å·ä» 1.0.0 (å«) åˆ° 2.0.0 (å«)</td>
<td>åŒ¹é… <code>1.0.0</code>, <code>1.3.4</code>, <code>2.0.0</code></td>
</tr>
</tbody>
</table>
<p>ä»»æ„ä¸¤æ¡è§„åˆ™ï¼Œç”¨ç©ºæ ¼è¿æ¥èµ·æ¥ï¼Œè¡¨ç¤ºâ€œä¸â€é€»è¾‘ï¼Œå³ä¸¤æ¡è§„åˆ™çš„äº¤é›†:</p>
<p>å¦‚ <code>&gt;=2.3.1 &lt;=2.8.0</code> å¯ä»¥è§£è¯»ä¸º: <code>&gt;=2.3.1</code> ä¸” <code>&lt;=2.8.0</code>:</p>
<ul>
<li>å¯ä»¥åŒ¹é… <code>2.3.1</code>, <code>2.4.5</code>, <code>2.8.0</code></li>
<li>ä½†ä¸åŒ¹é… <code>1.0.0</code>, <code>2.3.0</code>, <code>2.8.1</code>, <code>3.0.0</code></li>
</ul>
<p>ä»»æ„ä¸¤æ¡è§„åˆ™ï¼Œé€šè¿‡ <code>||</code> è¿æ¥èµ·æ¥ï¼Œè¡¨ç¤ºâ€œæˆ–â€é€»è¾‘ï¼Œå³ä¸¤æ¡è§„åˆ™çš„å¹¶é›†:</p>
<p>å¦‚ <code>^2 &gt;=2.3.1 || ^3 &gt;3.2</code> </p>
<ul>
<li>å¯ä»¥åŒ¹é…  <code>2.3.1</code>, <code>2,8.1</code>, <code>3.3.1</code></li>
<li>ä½†ä¸åŒ¹é… <code>1.0.0</code>, <code>2.2.0</code>, <code>3.1.0</code>, <code>4.0.0</code></li>
</ul>
<p>PS: é™¤äº†è¿™å‡ ç§ï¼Œè¿˜æœ‰å¦‚ä¸‹æ›´ç›´è§‚çš„è¡¨ç¤ºç‰ˆæœ¬å·èŒƒå›´çš„å†™æ³•:</p>
<ul>
<li><code>*</code> æˆ– <code>x</code> åŒ¹é…æ‰€æœ‰ä¸»ç‰ˆæœ¬</li>
<li><code>1</code> æˆ– <code>1.x</code> åŒ¹é… ä¸»ç‰ˆæœ¬å·ä¸º 1 çš„æ‰€æœ‰ç‰ˆæœ¬</li>
<li><code>1.2</code> æˆ– <code>1.2.x</code> åŒ¹é… ç‰ˆæœ¬å·ä¸º 1.2 å¼€å¤´çš„æ‰€æœ‰ç‰ˆæœ¬</li>
</ul>
<p>PPS: åœ¨å¸¸è§„ä»…åŒ…å«æ•°å­—çš„ç‰ˆæœ¬å·ä¹‹å¤–ï¼Œsemver è¿˜å…è®¸åœ¨ <code>MAJOR.MINOR.PATCH</code> åè¿½åŠ  <code>-</code> åè·Ÿç‚¹å·åˆ†éš”çš„æ ‡ç­¾ï¼Œä½œä¸ºé¢„å‘å¸ƒç‰ˆæœ¬æ ‡ç­¾ - <a href="https://github.com/npm/node-semver#prerelease-tags" target="_blank" rel="noopener">Prerelese Tags</a>ï¼Œé€šå¸¸è¢«è§†ä¸ºä¸ç¨³å®šã€ä¸å»ºè®®ç”Ÿäº§ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼š  </p>
<ul>
<li><code>1.0.0-alpha</code></li>
<li><code>1.0.0-beta.1</code></li>
<li><code>1.0.0-rc.3</code></li>
</ul>
<p>ä¸Šè¡¨ä¸­æˆ‘ä»¬æœ€å¸¸è§çš„æ˜¯ <code>^1.8.11</code> è¿™ç§æ ¼å¼çš„ range, å› ä¸ºæˆ‘ä»¬åœ¨ä½¿ç”¨ <code>npm install &lt;package name&gt;</code> å®‰è£…åŒ…æ—¶ï¼Œnpm é»˜è®¤å®‰è£…å½“å‰æœ€æ–°ç‰ˆæœ¬ï¼Œä¾‹å¦‚ <code>1.8.11</code>, ç„¶ååœ¨æ‰€å®‰è£…çš„ç‰ˆæœ¬å·å‰åŠ <code>^</code>å·, å°† <code>^1.8.11</code> å†™å…¥ package.json ä¾èµ–é…ç½®ï¼Œæ„å‘³ç€å¯ä»¥åŒ¹é… 1.8.11 ä»¥ä¸Šï¼Œ2.0.0 ä»¥ä¸‹çš„æ‰€æœ‰ç‰ˆæœ¬ã€‚</p>
<h3 id="4-2-ä¾èµ–ç‰ˆæœ¬å‡çº§"><a href="#4-2-ä¾èµ–ç‰ˆæœ¬å‡çº§" class="headerlink" title="4.2 ä¾èµ–ç‰ˆæœ¬å‡çº§"></a>4.2 ä¾èµ–ç‰ˆæœ¬å‡çº§</h3><p>é—®é¢˜æ¥äº†ï¼Œåœ¨å®‰è£…å®Œä¸€ä¸ªä¾èµ–åŒ…ä¹‹åæœ‰æ–°ç‰ˆæœ¬å‘å¸ƒäº†ï¼Œå¦‚ä½•ä½¿ç”¨ npm è¿›è¡Œç‰ˆæœ¬å‡çº§å‘¢ï¼Ÿâ€”â€”ç­”æ¡ˆæ˜¯ç®€å•çš„ <code>npm install</code> æˆ– <code>npm update</code>ï¼Œä½†åœ¨ä¸åŒçš„ npm ç‰ˆæœ¬ï¼Œä¸åŒçš„ package.json, package-lock.json æ–‡ä»¶ï¼Œå®‰è£…/å‡çº§çš„è¡¨ç°ä¹Ÿä¸åŒã€‚</p>
<p>æˆ‘ä»¬ä¸å¦¨è¿˜ä»¥ webpack ä¸¾ä¾‹ï¼Œåšå¦‚ä¸‹çš„<strong>å‰æå‡è®¾</strong>:</p>
<ul>
<li>æˆ‘ä»¬çš„å·¥ç¨‹é¡¹ç›® <code>app</code> ä¾èµ– webpack</li>
<li>é¡¹ç›®æœ€åˆåˆå§‹åŒ–æ—¶ï¼Œå®‰è£…äº†å½“æ—¶æœ€æ–°çš„åŒ… <a href="mailto:webpack@1.8.0" target="_blank" rel="noopener">webpack@1.8.0</a>ï¼Œå¹¶ä¸” package.json ä¸­çš„ä¾èµ–é…ç½®ä¸º: <code>&quot;webpack&quot;: &quot;^1.8.0&quot;</code></li>
<li>å½“å‰ï¼ˆ2018å¹´3æœˆï¼‰ webpack æœ€æ–°ç‰ˆæœ¬ä¸º <code>4.2.0</code>, webpack 1.x æœ€æ–°å­ç‰ˆæœ¬ä¸º <code>1.15.0</code></li>
</ul>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ npm 3, å¹¶ä¸”é¡¹ç›®ä¸å« package-lock.json, é‚£ä¹ˆæ ¹æ® node_modules æ˜¯å¦ä¸ºç©ºï¼Œæ‰§è¡Œ install/update çš„ç»“æœå¦‚ä¸‹ (<strong>node 6.13.1, npm 3.10.10</strong> ç¯å¢ƒä¸‹è¯•éªŒ):</p>
<table>
<thead>
<tr>
<th>#</th>
<th>package.json (BEFORE)</th>
<th>node_modules (BEFORE)</th>
<th>command (npm 3)</th>
<th>package.json (AFTER)</th>
<th>node_modules (AFTER)</th>
</tr>
</thead>
<tbody>
<tr>
<td>a)</td>
<td><code>webpack: ^1.8.0</code></td>
<td><a href="mailto:webpack@1.8.0" target="_blank" rel="noopener">webpack@1.8.0</a></td>
<td><code>install</code></td>
<td><code>webpack: ^1.8.0</code></td>
<td><a href="mailto:webpack@1.8.0" target="_blank" rel="noopener">webpack@1.8.0</a></td>
</tr>
<tr>
<td>b)</td>
<td><code>webpack: ^1.8.0</code></td>
<td>ç©º</td>
<td><code>install</code></td>
<td><code>webpack: ^1.8.0</code></td>
<td><a href="mailto:webpack@1.15.0" target="_blank" rel="noopener">webpack@1.15.0</a></td>
</tr>
<tr>
<td>c)</td>
<td><code>webpack: ^1.8.0</code></td>
<td><a href="mailto:webpack@1.8.0" target="_blank" rel="noopener">webpack@1.8.0</a></td>
<td><code>update</code></td>
<td><code>webpack: ^1.8.0</code></td>
<td><a href="mailto:webpack@1.15.0" target="_blank" rel="noopener">webpack@1.15.0</a></td>
</tr>
<tr>
<td>d)</td>
<td><code>webpack: ^1.8.0</code></td>
<td>ç©º</td>
<td><code>update</code></td>
<td><code>webpack: ^1.8.0</code></td>
<td><a href="mailto:webpack@1.15.0" target="_blank" rel="noopener">webpack@1.15.0</a></td>
</tr>
</tbody>
</table>
<p>æ ¹æ®è¿™ä¸ªè¡¨æˆ‘ä»¬å¯ä»¥å¯¹ npm 3 å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<ul>
<li>å¦‚æœæœ¬åœ° node_modules å·²å®‰è£…ï¼Œå†æ¬¡æ‰§è¡Œ install ä¸ä¼šæ›´æ–°åŒ…ç‰ˆæœ¬, æ‰§è¡Œ update æ‰ä¼šæ›´æ–°; è€Œå¦‚æœæœ¬åœ° node_modules ä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œ install/update éƒ½ä¼šç›´æ¥å®‰è£…æ›´æ–°åŒ…;</li>
<li>npm update æ€»æ˜¯ä¼šæŠŠåŒ…æ›´æ–°åˆ°ç¬¦åˆ package.json ä¸­æŒ‡å®šçš„ semver çš„<strong>æœ€æ–°</strong>ç‰ˆæœ¬å·â€”â€”æœ¬ä¾‹ä¸­ç¬¦åˆ <code>^1.8.0</code> çš„æœ€æ–°ç‰ˆæœ¬ä¸º <code>1.15.0</code></li>
<li>ä¸€æ—¦ç»™å®š package.json, æ— è®ºåé¢æ‰§è¡Œ npm install è¿˜æ˜¯ update, package.json ä¸­çš„ webpack ç‰ˆæœ¬ä¸€ç›´é¡½å›ºåœ°ä¿æŒ ä¸€å¼€å§‹çš„ <code>^1.8.0</code> å²¿ç„¶ä¸åŠ¨</li>
</ul>
<p>è¿™é‡Œä¸åˆç†çš„åœ°æ–¹åœ¨äºï¼Œå¦‚æœæœ€å¼€å§‹å›¢é˜Ÿä¸­ç¬¬ä¸€ä¸ªäººå®‰è£…äº† <a href="mailto:`webpack@1.8.0" target="_blank" rel="noopener">`webpack@1.8.0</a><code>, è€Œæ–°åŠ å…¥é¡¹ç›®çš„æˆå‘˜, checkout å·¥ç¨‹ä»£ç åæ‰§è¡Œ</code>npm install<code>ä¼šå®‰è£…å¾—åˆ°ä¸å¤ªä¸€æ ·çš„</code>1.15.0` ç‰ˆæœ¬ã€‚è™½ç„¶ semver çº¦å®šäº†å°ç‰ˆæœ¬å·åº”å½“ä¿æŒå‘ä¸‹å…¼å®¹ï¼ˆç›¸åŒå¤§ç‰ˆæœ¬å·ä¸‹çš„å°ç‰ˆæœ¬å·ï¼‰å…¼å®¹ï¼Œä½†ä¸‡ä¸€æœ‰ä¸ç†Ÿæ‚‰ä¸éµå¾ªæ­¤çº¦å®šçš„åŒ…å‘å¸ƒè€…ï¼Œå‘å¸ƒäº†ä¸å…¼å®¹çš„åŒ…ï¼Œæ­¤æ—¶å°±å¯èƒ½å‡ºç°å› ä¾èµ–ç¯å¢ƒä¸åŒå¯¼è‡´çš„ bugã€‚</p>
<p>ä¸‹é¢ç”± npm 5 å¸¦ç€ package-lock.json é—ªäº®ç™»åœºï¼Œæ‰§è¡Œ install/update çš„æ•ˆæœæ˜¯è¿™æ ·çš„ (<strong>node 9.8.0, npm 5.7.1</strong> ç¯å¢ƒä¸‹è¯•éªŒ):</p>
<blockquote>
<p>ä¸‹è¡¨ä¸ºè¡¨è¿°ç®€å•ï¼Œçœç•¥äº†åŒ…å webpack, install ç®€å†™ i, update ç®€å†™ä¸º up</p>
</blockquote>
<table>
<thead>
<tr>
<th>#</th>
<th>package.json (BEFORE)</th>
<th>node_modules (BEFORE)</th>
<th>package-lock (BEFORE)</th>
<th>command</th>
<th>package.json (AFTER)</th>
<th>node_modules (AFTER)</th>
</tr>
</thead>
<tbody>
<tr>
<td>a)</td>
<td><code>^1.8.0</code></td>
<td>@1.8.0</td>
<td>@1.8.0</td>
<td><code>i</code></td>
<td><code>^1.8.0</code></td>
<td>@1.8.0</td>
</tr>
<tr>
<td>b)</td>
<td><code>^1.8.0</code></td>
<td>ç©º</td>
<td>@1.8.0</td>
<td><code>i</code></td>
<td><code>^1.8.0</code></td>
<td>@1.8.0</td>
</tr>
<tr>
<td>c)</td>
<td><code>^1.8.0</code></td>
<td>@1.8.0</td>
<td>@1.8.0</td>
<td><strong><code>up</code></strong></td>
<td><strong><code>^1.15.0</code></strong></td>
<td>@1.15.0</td>
</tr>
<tr>
<td>d)</td>
<td><code>^1.8.0</code></td>
<td>ç©º</td>
<td>@1.8.0</td>
<td><code>up</code></td>
<td><code>^1.8.0</code></td>
<td>@1.15.0</td>
</tr>
<tr>
<td>e)</td>
<td><code>^1.15.0</code></td>
<td>@1.8.0 (æ—§)</td>
<td>@1.15.0</td>
<td><strong><code>i</code></strong></td>
<td><strong><code>^1.15.0</code></strong></td>
<td>@1.15.0</td>
</tr>
<tr>
<td>f)</td>
<td><code>^1.15.0</code></td>
<td>@1.8.0 (æ—§)</td>
<td>@1.15.0</td>
<td><strong><code>up</code></strong></td>
<td><strong><code>^1.15.0</code></strong></td>
<td>@1.15.0</td>
</tr>
</tbody>
</table>
<p>ä¸ npm 3 ç›¸æ¯”ï¼Œåœ¨å®‰è£…å’Œæ›´æ–°ä¾èµ–ç‰ˆæœ¬ä¸Šä¸»è¦çš„åŒºåˆ«ä¸ºï¼š</p>
<ul>
<li>æ— è®ºä½•æ—¶æ‰§è¡Œ install, npm éƒ½ä¼šä¼˜å…ˆæŒ‰ç…§ package-lock ä¸­æŒ‡å®šçš„ç‰ˆæœ¬æ¥å®‰è£… webpack; é¿å…äº† npm 3 è¡¨ä¸­æƒ…å½¢ b) çš„çŠ¶å†µ;</li>
<li>æ— è®ºä½•æ—¶å®Œæˆå®‰è£…/æ›´æ–°, package-lock æ–‡ä»¶æ€»ä¼šè·Ÿç€ node_modules æ›´æ–° â€”â€” (å› æ­¤å¯ä»¥è§† package-lock æ–‡ä»¶ä¸º node_modules çš„ JSON è¡¨è¿°)</li>
<li>å·²å®‰è£… node_modules åè‹¥æ‰§è¡Œ npm updateï¼Œpackage.json ä¸­çš„ç‰ˆæœ¬å·ä¹Ÿä¼šéšä¹‹æ›´æ”¹ä¸º <code>^1.15.0</code></li>
</ul>
<p>ç”±æ­¤å¯è§ npm 5.1 ä½¿å¾— package.json å’Œ package-lock.json ä¸­æ‰€ä¿å­˜çš„ç‰ˆæœ¬å·æ›´åŠ ç»Ÿä¸€ï¼Œè§£å†³äº† npm ä¹‹å‰çš„å„ç§é—®é¢˜ã€‚åªè¦éµå¾ªå¥½çš„å®è·µä¹ æƒ¯ï¼Œå›¢é˜Ÿæˆå‘˜å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç»´æŠ¤ä¸€å¥—åº”ç”¨ä»£ç å’Œ node_modules ä¾èµ–éƒ½ä¸€è‡´çš„ç¯å¢ƒã€‚</p>
<p>çš†å¤§æ¬¢å–œã€‚</p>
<h3 id="4-3-æœ€ä½³å®è·µ"><a href="#4-3-æœ€ä½³å®è·µ" class="headerlink" title="4.3 æœ€ä½³å®è·µ"></a>4.3 æœ€ä½³å®è·µ</h3><p>æ€»ç»“èµ·æ¥ï¼Œåœ¨ 2018 å¹´ (node 9.8.0, npm 5.7.1) æ—¶ä»£ï¼Œæˆ‘è®¤ä¸ºçš„ä¾èµ–ç‰ˆæœ¬ç®¡ç†åº”å½“æ˜¯:</p>
<ul>
<li>ä½¿ç”¨ npm: <code>&gt;=5.1</code> ç‰ˆæœ¬, ä¿æŒ <code>package-lock.json</code> æ–‡ä»¶é»˜è®¤å¼€å¯é…ç½®</li>
<li>åˆå§‹åŒ–ï¼šç¬¬ä¸€ä½œè€…åˆå§‹åŒ–é¡¹ç›®æ—¶ä½¿ç”¨ <code>npm install &lt;package&gt;</code> å®‰è£…ä¾èµ–åŒ…, é»˜è®¤ä¿å­˜ <code>^X.Y.Z</code> ä¾èµ– range åˆ° package.jsonä¸­; æäº¤ <code>package.json</code>, <code>package-lock.json</code>, <strong>ä¸è¦æäº¤</strong> <code>node_modules</code> ç›®å½•</li>
<li>åˆå§‹åŒ–ï¼šé¡¹ç›®æˆå‘˜<strong>é¦–æ¬¡</strong> checkout/clone é¡¹ç›®ä»£ç åï¼Œæ‰§è¡Œ<strong>ä¸€æ¬¡</strong> <code>npm install</code> å®‰è£…ä¾èµ–åŒ…</li>
<li><strong>ä¸è¦</strong>æ‰‹åŠ¨ä¿®æ”¹ package-lock.json</li>
<li>å‡çº§ä¾èµ–åŒ…:  <ul>
<li>å‡çº§å°ç‰ˆæœ¬: æœ¬åœ°æ‰§è¡Œ <code>npm update</code> å‡çº§åˆ°æ–°çš„å°ç‰ˆæœ¬</li>
<li>å‡çº§å¤§ç‰ˆæœ¬: æœ¬åœ°æ‰§è¡Œ <code>npm install &lt;package-name&gt;@&lt;version&gt;</code> å‡çº§åˆ°æ–°çš„å¤§ç‰ˆæœ¬</li>
<li>ä¹Ÿå¯æ‰‹åŠ¨ä¿®æ”¹ package.json ä¸­ç‰ˆæœ¬å·ä¸ºè¦<strong>å‡çº§</strong>çš„ç‰ˆæœ¬(å¤§äºç°æœ‰ç‰ˆæœ¬å·)å¹¶æŒ‡å®šæ‰€éœ€çš„ semver, ç„¶åæ‰§è¡Œ <code>npm install</code></li>
<li>æœ¬åœ°éªŒè¯å‡çº§åæ–°ç‰ˆæœ¬æ— é—®é¢˜åï¼Œ<strong>æäº¤</strong>æ–°çš„ <code>package.json</code>, <code>package-lock.json</code> æ–‡ä»¶</li>
</ul>
</li>
<li><p>é™çº§ä¾èµ–åŒ…:</p>
<ul>
<li><strong>æ­£ç¡®</strong>: <code>npm install &lt;package-name&gt;@&lt;old-version&gt;</code> éªŒè¯æ— é—®é¢˜åï¼Œ<strong>æäº¤</strong> package.json å’Œ package-lock.json æ–‡ä»¶</li>
<li><strong>é”™è¯¯</strong>: æ‰‹åŠ¨ä¿®æ”¹ <code>package.json</code> ä¸­çš„ç‰ˆæœ¬å·ä¸ºæ›´ä½ç‰ˆæœ¬çš„ semver, è¿™æ ·ä¿®æ”¹å¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºå†æ¬¡æ‰§è¡Œ <code>npm install</code> ä¾ç„¶ä¼šå®‰è£… <code>package-lock.json</code> ä¸­çš„é”å®šç‰ˆæœ¬</li>
</ul>
</li>
<li><p>åˆ é™¤ä¾èµ–åŒ…:</p>
<ul>
<li>Plan A: <code>npm uninstall &lt;package&gt;</code> å¹¶æäº¤ <code>package.json</code> å’Œ <code>package-lock.json</code></li>
<li>Plan B: æŠŠè¦å¸è½½çš„åŒ…ä» package.json ä¸­ dependencies å­—æ®µåˆ é™¤, ç„¶åæ‰§è¡Œ <code>npm install</code> å¹¶æäº¤ <code>package.json</code> å’Œ <code>package-lock.json</code></li>
</ul>
</li>
<li><p>ä»»ä½•æ—¶å€™æœ‰äººæäº¤äº† package.json, package-lock.json æ›´æ–°åï¼Œå›¢é˜Ÿå…¶ä»–æˆå‘˜åº”åœ¨ svn update/git pull æ‹‰å–æ›´æ–°åæ‰§è¡Œ <code>npm install</code> è„šæœ¬å®‰è£…æ›´æ–°åçš„ä¾èµ–åŒ…</p>
</li>
</ul>
<p><del>æ­å–œä½ ç»ˆäºå¯ä»¥è·Ÿ <strong><code>rm -rf node_modules</code> &amp;&amp; <code>npm install</code></strong> è¿™æ³¢æ“ä½œè¯´æ‹œæ‹œäº†ï¼ˆå…¶å®å¹¶ä¸ä¼šï¼‰</del></p>
<h2 id="5-npm-scripts"><a href="#5-npm-scripts" class="headerlink" title="5. npm scripts"></a>5. npm scripts</h2><h3 id="5-1-åŸºæœ¬ä½¿ç”¨"><a href="#5-1-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="5.1 åŸºæœ¬ä½¿ç”¨"></a>5.1 åŸºæœ¬ä½¿ç”¨</h3><p>npm scripts æ˜¯ npm å¦ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§ã€‚é€šè¿‡åœ¨ package.json ä¸­ scripts å­—æ®µå®šä¹‰ä¸€ä¸ªè„šæœ¬ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">        <span class="attr">"echo"</span>: <span class="string">"echo HELLO WORLD"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>npm run echo</code> å‘½ä»¤æ¥æ‰§è¡Œè¿™æ®µè„šæœ¬ï¼Œåƒåœ¨ shell ä¸­æ‰§è¡Œè¯¥å‘½ä»¤ <code>echo HELLO WORLD</code> ä¸€æ ·ï¼Œçœ‹åˆ°ç»ˆç«¯è¾“å‡º <code>HELLO WORLD</code>.</p>
<p>â€”â€” npm scripts çš„åŸºæœ¬ä½¿ç”¨å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¥å£ç”¨æ¥è°ƒç”¨å·¥ç¨‹ç›¸å…³çš„è„šæœ¬ã€‚å…³äºæ›´è¯¦ç»†çš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„æ–‡ç«  <a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="noopener">npm script ä½¿ç”¨æŒ‡å— (2016å¹´10æœˆ)</a>.</p>
<p>ç®€è¦æ€»ç»“é˜®è€å¸ˆæ–‡ç« å†…å®¹ï¼š</p>
<ol>
<li><code>npm run</code> å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œä¼šæŠŠ <code>./node_modules/.bin/</code> ç›®å½•æ·»åŠ åˆ°æ‰§è¡Œç¯å¢ƒçš„ <code>PATH</code> å˜é‡ä¸­ï¼Œå› æ­¤å¦‚æœæŸä¸ª<strong>å‘½ä»¤è¡ŒåŒ…</strong>æœªå…¨å±€å®‰è£…ï¼Œè€Œåªå®‰è£…åœ¨äº†å½“å‰é¡¹ç›®çš„ node_modules ä¸­ï¼Œé€šè¿‡ <code>npm run</code> ä¸€æ ·å¯ä»¥è°ƒç”¨è¯¥å‘½ä»¤ã€‚</li>
<li>æ‰§è¡Œ npm è„šæœ¬æ—¶è¦ä¼ å…¥å‚æ•°ï¼Œéœ€è¦åœ¨å‘½ä»¤ååŠ  <code>--</code> æ ‡æ˜, å¦‚ <code>npm run test -- --grep=&quot;pattern&quot;</code> å¯ä»¥å°† <code>--grep=&quot;pattern&quot;</code> å‚æ•°ä¼ ç»™ <code>test</code> å‘½ä»¤</li>
<li>npm æä¾›äº† pre å’Œ post ä¸¤ç§é’©å­æœºåˆ¶ï¼Œå¯ä»¥å®šä¹‰æŸä¸ªè„šæœ¬å‰åçš„æ‰§è¡Œè„šæœ¬</li>
<li>è¿è¡Œæ—¶å˜é‡ï¼šåœ¨ <code>npm run</code> çš„è„šæœ¬æ‰§è¡Œç¯å¢ƒå†…ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼è·å–è®¸å¤šè¿è¡Œæ—¶ç›¸å…³ä¿¡æ¯ï¼Œä»¥ä¸‹éƒ½å¯ä»¥é€šè¿‡ <code>process.env</code> å¯¹è±¡è®¿é—®è·å¾—ï¼š<ul>
<li><code>npm_lifecycle_event</code> - æ­£åœ¨è¿è¡Œçš„è„šæœ¬åç§°</li>
<li><code>npm_package_&lt;key&gt;</code> - è·å–å½“å‰åŒ… package.json ä¸­æŸä¸ªå­—æ®µçš„é…ç½®å€¼ï¼šå¦‚ <code>npm_package_name</code> è·å–åŒ…å</li>
<li><code>npm_package_&lt;key&gt;_&lt;sub-key&gt;</code> - package.json ä¸­åµŒå¥—å­—æ®µå±æ€§ï¼šå¦‚ <code>npm_pacakge_dependencies_webpack</code> å¯ä»¥è·å–åˆ° package.json ä¸­çš„ <code>dependencies.webpack</code> å­—æ®µçš„å€¼ï¼Œå³ webpack çš„ç‰ˆæœ¬å·</li>
</ul>
</li>
</ol>
<h3 id="5-2-node-modules-bin-ç›®å½•"><a href="#5-2-node-modules-bin-ç›®å½•" class="headerlink" title="5.2 node_modules/.bin ç›®å½•"></a>5.2 node_modules/.bin ç›®å½•</h3><p>ä¸Šé¢æ‰€è¯´çš„ <code>node_modules/.bin</code> ç›®å½•ï¼Œä¿å­˜äº†ä¾èµ–ç›®å½•ä¸­æ‰€å®‰è£…çš„å¯ä¾›è°ƒç”¨çš„å‘½ä»¤è¡ŒåŒ…ã€‚</p>
<p>ä½•è°“å‘½ä»¤è¡ŒåŒ…ï¼Ÿä¾‹å¦‚ <code>webpack</code> å°±å±äºä¸€ä¸ªå‘½ä»¤è¡ŒåŒ…ã€‚å¦‚æœæˆ‘ä»¬åœ¨å®‰è£… webpack æ—¶æ·»åŠ  <code>--global</code> å‚æ•°ï¼Œå°±å¯ä»¥åœ¨ç»ˆç«¯ç›´æ¥è¾“å…¥ <code>webpack</code> è¿›è¡Œè°ƒç”¨ã€‚ä½†å¦‚æœä¸åŠ  <code>--global</code> å‚æ•°ï¼Œæˆ‘ä»¬ä¼šåœ¨ <code>node_modules/.bin</code> ç›®å½•é‡Œçœ‹åˆ°åä¸º webpack çš„æ–‡ä»¶ï¼Œå¦‚æœåœ¨ç»ˆç«¯ç›´æ¥è¾“å…¥ <code>./node_modules/.bin/webpack</code> å‘½ä»¤ï¼Œä¸€æ ·å¯ä»¥æ‰§è¡Œã€‚</p>
<p>è¿™æ˜¯å› ä¸º <code>webpack</code> åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­å®šä¹‰äº† <code>bin</code> å­—æ®µä¸º:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;bin&quot;: &#123;</span><br><span class="line">        &quot;webpack&quot;: &quot;./bin/webpack.js&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>bin å­—æ®µçš„é…ç½®æ ¼å¼ä¸º: <code>&lt;command&gt;: &lt;file&gt;</code>, å³ <code>å‘½ä»¤å: å¯æ‰§è¡Œæ–‡ä»¶</code>. npm æ‰§è¡Œ install æ—¶ï¼Œä¼šåˆ†ææ¯ä¸ªä¾èµ–åŒ…çš„ package.json ä¸­çš„ <code>bin</code> å­—æ®µï¼Œå¹¶å°†å…¶åŒ…å«çš„æ¡ç›®å®‰è£…åˆ° <code>./node_modules/.bin</code> ç›®å½•ä¸­ï¼Œæ–‡ä»¶åä¸º <code>&lt;command&gt;</code>ã€‚è€Œå¦‚æœæ˜¯å…¨å±€æ¨¡å¼å®‰è£…ï¼Œåˆ™ä¼šåœ¨ npm å…¨å±€å®‰è£…è·¯å¾„çš„ bin ç›®å½•ä¸‹åˆ›å»ºæŒ‡å‘ <code>&lt;file&gt;</code> åä¸º <code>&lt;command&gt;</code> çš„è½¯é“¾ã€‚å› æ­¤ï¼Œ<code>./node_modules/.bin/webpack</code> æ–‡ä»¶åœ¨é€šè¿‡å‘½ä»¤è¡Œè°ƒç”¨æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨æ‰§è¡Œ <code>node ./node_modules/.bin/webpack.js</code> å‘½ä»¤ã€‚</p>
<p>æ­£å¦‚ä¸Šä¸€èŠ‚æ‰€è¯´ï¼Œ<code>npm run</code> å‘½ä»¤åœ¨æ‰§è¡Œæ—¶ä¼šæŠŠ <code>./node_modules/.bin</code> åŠ å…¥åˆ° <code>PATH</code> ä¸­ï¼Œä½¿æˆ‘ä»¬å¯ç›´æ¥è°ƒç”¨æ‰€æœ‰æä¾›äº†å‘½ä»¤è¡Œè°ƒç”¨æ¥å£çš„ä¾èµ–åŒ…ã€‚æ‰€ä»¥è¿™é‡Œå°±å¼•å‡ºäº†ä¸€ä¸ªæœ€ä½³å®è·µï¼š</p>
<blockquote>
<p>å°†é¡¹ç›®ä¾èµ–çš„å‘½ä»¤è¡Œå·¥å…·å®‰è£…åˆ°é¡¹ç›®ä¾èµ–æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åé€šè¿‡ npm scripts è°ƒç”¨ï¼›è€Œéå…¨å±€å®‰è£…</p>
</blockquote>
<p>ä¸¾ä¾‹è€Œè¨€ <code>webpack</code> ä½œä¸ºå‰ç«¯å·¥ç¨‹æ ‡é…çš„æ„å»ºå·¥å…·ï¼Œè™½ç„¶æˆ‘ä»¬éƒ½ä¹ æƒ¯äº†å…¨å±€å®‰è£…å¹¶ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œè°ƒç”¨ï¼Œä½†ä¸åŒçš„é¡¹ç›®ä¾èµ–çš„ webpack ç‰ˆæœ¬å¯èƒ½ä¸åŒï¼Œç›¸åº”çš„ <code>webpack.config.js</code> é…ç½®æ–‡ä»¶ä¹Ÿå¯èƒ½åªå…¼å®¹äº†ç‰¹å®šç‰ˆæœ¬çš„ webpack. å¦‚æœæˆ‘ä»¬ä»…å…¨å±€å®‰è£…äº†æœ€æ–°çš„ webpack 4.x å¹¶ä½¿ç”¨ webpack å‘½ä»¤è°ƒç”¨ï¼Œåœ¨ä¸€ä¸ªä¾èµ– webpack 3.x çš„å·¥ç¨‹ä¸­å°±ä¼šæ— æ³•æˆåŠŸæ‰§è¡Œæ„å»ºã€‚</p>
<p>ä½†å¦‚æœè¿™ç±»å·¥å…·æ€»æ˜¯æœ¬åœ°å®‰è£…ï¼Œæˆ‘ä»¬è¦è°ƒç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œè¦æ‰‹åŠ¨æ·»åŠ  <code>./node_modules/.bin</code> è¿™ä¸ªé•¿é•¿çš„å‰ç¼€ï¼Œæœªå…ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬ nodejs å¼€å‘è€…éƒ½å¾ˆæ‡’çš„ã€‚äºæ˜¯ npm ä»5.2 å¼€å§‹è‡ªå¸¦äº†ä¸€ä¸ªæ–°çš„å·¥å…· <code>npx</code>.</p>
<h3 id="5-3-npx"><a href="#5-3-npx" class="headerlink" title="5.3 npx"></a>5.3 npx</h3><p>npx çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå°±æ˜¯æ‰§è¡Œ <code>npx &lt;command&gt;</code> å³å¯ï¼Œè¿™é‡Œçš„ <code>&lt;command&gt;</code> é»˜è®¤å°±æ˜¯ <code>./node_modules</code> ç›®å½•ä¸­å®‰è£…çš„å¯æ‰§è¡Œè„šæœ¬åã€‚ä¾‹å¦‚ä¸Šé¢æœ¬åœ°å®‰è£…å¥½çš„ webpack åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>npx webpack</code> æ‰§è¡Œå³å¯ã€‚</p>
<p>é™¤äº†è¿™ç§æœ€ç®€å•çš„åœºæ™¯, npm cli å›¢é˜Ÿå¼€å‘è€… Kat MarchÃ¡n è¿˜åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†å…¶ä»–å‡ ç§ npx çš„ç¥å¥‡ç”¨æ³•:  <a href="https://bit.ly/2uzuIHv" target="_blank" rel="noopener">Introducing npx: an npm package runner</a>, å›½å†…æœ‰ä½å¼€å‘è€… robin.law å°†åŸæ–‡ç¿»è¯‘ä¸ºä¸­æ–‡ <a href="https://robin-front.github.io/2017/07/14/introducing-npx-an-npm-package-runner/" target="_blank" rel="noopener">npxæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦npx?</a>.</p>
<p>æœ‰å…´è¶£çš„å¯ä»¥æˆ³é“¾æ¥äº†è§£ï¼Œæ‡’å¾—ç‚¹é“¾æ¥çš„ï¼Œçœ‹æ€»ç»“ï¼š</p>
<h4 id="åœºæ™¯a-ä¸€é”®æ‰§è¡Œè¿œç¨‹-npm-æºçš„äºŒè¿›åˆ¶åŒ…"><a href="#åœºæ™¯a-ä¸€é”®æ‰§è¡Œè¿œç¨‹-npm-æºçš„äºŒè¿›åˆ¶åŒ…" class="headerlink" title="åœºæ™¯a) ä¸€é”®æ‰§è¡Œè¿œç¨‹ npm æºçš„äºŒè¿›åˆ¶åŒ…"></a>åœºæ™¯a) ä¸€é”®æ‰§è¡Œè¿œç¨‹ npm æºçš„äºŒè¿›åˆ¶åŒ…</h4><p>é™¤äº†åœ¨ package ä¸­æ‰§è¡Œ ./node_modules/.bin ä¸­å·²å®‰è£…çš„å‘½ä»¤, è¿˜å¯ä»¥ç›´æ¥æŒ‡å®šæœªå®‰è£…çš„äºŒè¿›åˆ¶åŒ…åæ‰§è¡Œã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨ä¸€ä¸ªæ²¡æœ‰ package.json ä¹Ÿæ²¡æœ‰ node_modules çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npx cowsay hello</span><br></pre></td></tr></table></figure>
<p>npx å°†ä¼šä» npm æºä¸‹è½½ <code>cowsay</code> è¿™ä¸ªåŒ…ï¼ˆä½†å¹¶ä¸å®‰è£…ï¼‰å¹¶æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> _______ </span><br><span class="line">&lt; hello &gt;</span><br><span class="line"> ------- </span><br><span class="line">        \   ^__^</span><br><span class="line">         \  (oo)\_______</span><br><span class="line">            (__)\       )\/\</span><br><span class="line">                ||----w |</span><br><span class="line">                ||     ||</span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§ç”¨é€”éå¸¸é€‚åˆ 1. åœ¨æœ¬åœ°ç®€å•æµ‹è¯•æˆ–è°ƒè¯• npm æºä¸Šè¿™äº›äºŒè¿›åˆ¶åŒ…çš„åŠŸèƒ½ï¼›2. è°ƒç”¨ create-react-app æˆ– yeoman è¿™ç±»å¾€å¾€æ¯ä¸ªé¡¹ç›®åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡çš„è„šæ‰‹æ¶å·¥å…·</p>
<p>PS: æ­¤å¤„æœ‰å½©è›‹ï¼Œæ‰§è¡Œè¿™æ¡å‘½ä»¤è¯•è¯•:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npx workin-hard</span><br></pre></td></tr></table></figure></p>
<h4 id="åœºæ™¯b-ä¸€é”®æ‰§è¡Œ-GitHub-Gist"><a href="#åœºæ™¯b-ä¸€é”®æ‰§è¡Œ-GitHub-Gist" class="headerlink" title="åœºæ™¯b) ä¸€é”®æ‰§è¡Œ GitHub Gist"></a>åœºæ™¯b) ä¸€é”®æ‰§è¡Œ GitHub Gist</h4><p>è¿˜è®°å¾—å‰é¢æåˆ°çš„ <a href="#2-1-packageå®šä¹‰">2.1 packageå®šä¹‰</a> ä¹ˆï¼Œ<code>npm install &lt;package&gt;</code> å¯ä»¥æ˜¯åŒ…å«äº†æœ‰æ•ˆ package.json çš„ git url.</p>
<p>åˆšå¥½ GitHub Gist ä¹Ÿæ˜¯ git ä»“åº“ çš„ä¸€ç§ï¼Œé›†åˆ npx å°±å¯ä»¥æ–¹ä¾¿åœ°å°†ç®€å•çš„è„šæœ¬å…±äº«ç»™å…¶ä»–äººï¼Œæ‹¥æœ‰è¯¥é“¾æ¥çš„äººæ— éœ€å°†è„šæœ¬å®‰è£…åˆ°æœ¬åœ°å·¥ä½œç›®å½•å³å¯æ‰§è¡Œã€‚å°† package.json å’Œ éœ€æ‰§è¡Œçš„äºŒè¿›åˆ¶è„šæœ¬ä¸Šä¼ è‡³ gist, åœ¨è¿è¡Œ <code>npx &lt;gist url&gt;</code> å°±å¯ä»¥æ–¹ä¾¿åœ°æ‰§è¡Œè¯¥ gist å®šä¹‰çš„å‘½ä»¤ã€‚</p>
<p>åŸæ–‡ä½œè€… Kat MarchÃ¡n æä¾›äº†<a href="https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32" target="_blank" rel="noopener">è¿™ä¸ª</a>ç¤ºä¾‹ gist, æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</span><br></pre></td></tr></table></figure></p>
<p>å¯å¾—åˆ°ä¸€ä¸ªæ¥è‡ª GitHubGist çš„ hello world é—®å€™ã€‚</p>
<h4 id="åœºæ™¯c-ä½¿ç”¨ä¸åŒç‰ˆæœ¬-node-æ‰§è¡Œå‘½ä»¤"><a href="#åœºæ™¯c-ä½¿ç”¨ä¸åŒç‰ˆæœ¬-node-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="åœºæ™¯c) ä½¿ç”¨ä¸åŒç‰ˆæœ¬ node æ‰§è¡Œå‘½ä»¤"></a>åœºæ™¯c) ä½¿ç”¨ä¸åŒç‰ˆæœ¬ node æ‰§è¡Œå‘½ä»¤</h4><p>å°† npx ä¸ Aria Stewart åˆ›å»ºçš„ <code>node</code> åŒ… (<a href="https://www.npmjs.com/package/node" target="_blank" rel="noopener">https://www.npmjs.com/package/node</a>) ç»“åˆï¼Œå¯ä»¥å®ç°åœ¨ä¸€è¡Œå‘½ä»¤ä¸­ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„ node æ‰§è¡Œå‘½ä»¤ã€‚</p>
<p>ä¾‹å¦‚å…ˆåæ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npx node@4 -e &quot;console.log(process.version)&quot;</span><br><span class="line">npx node@6 -e &quot;console.log(process.version)&quot;</span><br></pre></td></tr></table></figure></p>
<p>å°†åˆ†åˆ«è¾“å‡º <code>v4.8.7</code> å’Œ <code>v6.13.0</code>.</p>
<p>å¾€å¸¸è¿™ç§å·¥ä½œæ˜¯ç”± <code>nvm</code> è¿™ç±» node ç‰ˆæœ¬ç®¡ç†å·¥å…·æ¥åšçš„ï¼Œä½† <code>npx node@4</code> è¿™ç§æ–¹å¼å…å» nvm æ‰‹åŠ¨åˆ‡æ¢é…ç½®çš„æ­¥éª¤ï¼Œæ›´åŠ ç®€æ´ç®€å•ã€‚</p>
<h2 id="6-npm-é…ç½®"><a href="#6-npm-é…ç½®" class="headerlink" title="6. npm é…ç½®"></a>6. npm é…ç½®</h2><h3 id="6-1-npm-config"><a href="#6-1-npm-config" class="headerlink" title="6.1 npm config"></a>6.1 npm config</h3><p>npm cli æä¾›äº† <code>npm config</code> å‘½ä»¤è¿›è¡Œ npm ç›¸å…³é…ç½®ï¼Œé€šè¿‡ <code>npm config ls -l</code> å¯æŸ¥çœ‹ npm çš„æ‰€æœ‰é…ç½®ï¼ŒåŒ…æ‹¬é»˜è®¤é…ç½®ã€‚npm æ–‡æ¡£é¡µä¸ºæ¯ä¸ªé…ç½®é¡¹æä¾›äº†è¯¦ç»†çš„è¯´æ˜ <a href="https://docs.npmjs.com/misc/config" target="_blank" rel="noopener">https://docs.npmjs.com/misc/config</a> .</p>
<p>ä¿®æ”¹é…ç½®çš„å‘½ä»¤ä¸º <code>npm config set &lt;key&gt; &lt;value&gt;</code>, æˆ‘ä»¬ä½¿ç”¨ç›¸å…³çš„å¸¸è§é‡è¦é…ç½®:</p>
<ul>
<li><code>proxy</code>, <code>https-proxy</code>: æŒ‡å®š npm ä½¿ç”¨çš„ä»£ç†</li>
<li><code>registry</code> æŒ‡å®š npm ä¸‹è½½å®‰è£…åŒ…æ—¶çš„æºï¼Œé»˜è®¤ä¸º <code>https://registry.npmjs.org/</code> å¯ä»¥æŒ‡å®šä¸ºç§æœ‰ Registry æº</li>
<li><code>package-lock</code> æŒ‡å®šæ˜¯å¦é»˜è®¤ç”Ÿæˆ package-lock æ–‡ä»¶ï¼Œå»ºè®®ä¿æŒé»˜è®¤ true</li>
<li><code>save</code> true/false æŒ‡å®šæ˜¯å¦åœ¨ npm install åä¿å­˜åŒ…ä¸º dependencies, npm 5 èµ·é»˜è®¤ä¸º true</li>
</ul>
<p>åˆ é™¤æŒ‡å®šçš„é…ç½®é¡¹å‘½ä»¤ä¸º <code>npm config delete &lt;key&gt;</code>.</p>
<h3 id="6-2-npmrc-æ–‡ä»¶"><a href="#6-2-npmrc-æ–‡ä»¶" class="headerlink" title="6.2 npmrc æ–‡ä»¶"></a>6.2 npmrc æ–‡ä»¶</h3><p>é™¤äº†ä½¿ç”¨ CLI çš„ <code>npm config</code> å‘½ä»¤æ˜¾ç¤ºæ›´æ”¹ npm é…ç½®ï¼Œè¿˜å¯ä»¥é€šè¿‡ npmrc æ–‡ä»¶ç›´æ¥ä¿®æ”¹é…ç½®ã€‚</p>
<p>è¿™æ ·çš„ npmrc æ–‡ä»¶ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½åŒ…æ‹¬ï¼š</p>
<ul>
<li>å·¥ç¨‹å†…é…ç½®æ–‡ä»¶: <code>/path/to/my/project/.npmrc</code></li>
<li>ç”¨æˆ·çº§é…ç½®æ–‡ä»¶: <code>~/.npmrc</code></li>
<li>å…¨å±€é…ç½®æ–‡ä»¶: <code>$PREFIX/etc/npmrc</code> (å³<code>npm config get globalconfig</code> è¾“å‡ºçš„è·¯å¾„)</li>
<li>npmå†…ç½®é…ç½®æ–‡ä»¶: <code>/path/to/npm/npmrc</code></li>
</ul>
<p>é€šè¿‡è¿™ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åœ¨å·¥ç¨‹è·Ÿç›®å½•åˆ›å»ºä¸€ä¸ª <code>.npmrc</code> æ–‡ä»¶æ¥å…±äº«éœ€è¦åœ¨å›¢é˜Ÿé—´å…±äº«çš„ npm è¿è¡Œç›¸å…³é…ç½®ã€‚æ¯”å¦‚å¦‚æœæˆ‘ä»¬åœ¨å…¬å¸å†…ç½‘ç¯å¢ƒä¸‹éœ€é€šè¿‡ä»£ç†æ‰å¯è®¿é—® registry.npmjs.org æºï¼Œæˆ–éœ€è®¿é—®å†…ç½‘çš„ registry, å°±å¯ä»¥åœ¨å·¥ä½œé¡¹ç›®ä¸‹æ–°å¢ .npmrc æ–‡ä»¶å¹¶æäº¤ä»£ç åº“ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">proxy = http://proxy.example.com/</span><br><span class="line">https-proxy = http://proxy.example.com/</span><br><span class="line">registry = http://registry.example.com/</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºé¡¹ç›®çº§ .npmrc æ–‡ä»¶çš„ä½œç”¨åŸŸåªåœ¨æœ¬é¡¹ç›®ä¸‹ï¼Œæ‰€ä»¥åœ¨éæœ¬ç›®å½•ä¸‹ï¼Œè¿™äº›é…ç½®å¹¶ä¸ç”Ÿæ•ˆã€‚å¯¹äºä½¿ç”¨ç¬”è®°æœ¬å·¥ä½œçš„å¼€å‘è€…ï¼Œå¯ä»¥å¾ˆå¥½åœ°éš”ç¦»å…¬å¸çš„å·¥ä½œé¡¹ç›®ã€åœ¨å®¶å­¦ä¹ ç ”ç©¶é¡¹ç›®ä¸¤ç§ä¸åŒçš„ç¯å¢ƒã€‚</p>
<p>å°†è¿™ä¸ªåŠŸèƒ½ä¸ <code>~/.npm-init.js</code> é…ç½®ç›¸ç»“åˆï¼Œå¯ä»¥å°†ç‰¹å®šé…ç½®çš„ .npmrc è·Ÿ .gitignore, README ä¹‹ç±»æ–‡ä»¶ä¸€èµ·åšåˆ° npm init è„šæ‰‹æ¶ä¸­ï¼Œè¿›ä¸€æ­¥å‡å°‘æ‰‹åŠ¨é…ç½®ã€‚</p>
<h3 id="6-3-node-ç‰ˆæœ¬çº¦æŸ"><a href="#6-3-node-ç‰ˆæœ¬çº¦æŸ" class="headerlink" title="6.3 node ç‰ˆæœ¬çº¦æŸ"></a>6.3 node ç‰ˆæœ¬çº¦æŸ</h3><p>è™½ç„¶ä¸€ä¸ªé¡¹ç›®çš„å›¢é˜Ÿéƒ½å…±äº«äº†ç›¸åŒçš„ä»£ç ï¼Œä½†æ¯ä¸ªäººçš„å¼€å‘æœºå™¨å¯èƒ½å®‰è£…äº†ä¸åŒçš„ node ç‰ˆæœ¬ï¼Œæ­¤å¤–æœåŠ¡å™¨ç«¯çš„ä¹Ÿå¯èƒ½ä¸æœ¬åœ°å¼€å‘æœºä¸ä¸€è‡´ã€‚</p>
<p>è¿™åˆæ˜¯ä¸€ä¸ªå¯èƒ½å¸¦æ¥ä¸ä¸€è‡´æ€§çš„å› ç´  â€”â€” ä½†ä¹Ÿä¸æ˜¯å¾ˆéš¾è§£å†³ï¼Œå£°æ˜å¼çº¦æŸ+è„šæœ¬é™åˆ¶å³å¯ã€‚</p>
<p><strong>å£°æ˜</strong>ï¼šé€šè¿‡ <code>package.json</code> çš„ <code>engines</code> å±æ€§å£°æ˜åº”ç”¨è¿è¡Œæ‰€éœ€çš„ç‰ˆæœ¬è¿è¡Œæ—¶è¦æ±‚ã€‚ä¾‹å¦‚æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† <code>async</code>, <code>await</code> ç‰¹æ€§ï¼Œ<a href="https://node.green" target="_blank" rel="noopener">æŸ¥é˜…å…¼å®¹æ€§è¡¨æ ¼</a>å¾—çŸ¥æœ€ä½æ”¯æŒç‰ˆæœ¬ä¸º 7.6.0ï¼Œå› æ­¤æŒ‡å®š engines é…ç½®ä¸º:<br><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"engines"</span>: &#123; <span class="attr">"node"</span>: <span class="string">"&gt;=7.6.0"</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>å¼ºçº¦æŸ</strong>(å¯é€‰)ï¼šåœ¨ npm ä¸­ä»¥ä¸Šå­—æ®µå†…å®¹ä»…ä½œä¸ºå»ºè®®å­—æ®µä½¿ç”¨ï¼Œè‹¥è¦åœ¨ç§æœ‰é¡¹ç›®ä¸­æ·»åŠ å¼ºçº¦æŸï¼Œéœ€è¦è‡ªå·±å†™è„šæœ¬é’©å­ï¼Œè¯»å–å¹¶è§£æ engines å­—æ®µçš„ semver range å¹¶ä¸è¿è¡Œæ—¶ç¯å¢ƒåšå¯¹æ¯”æ ¡éªŒå¹¶é€‚å½“æé†’ã€‚</p>
<h2 id="7-å°ç»“-npm-æœ€ä½³å®è·µ"><a href="#7-å°ç»“-npm-æœ€ä½³å®è·µ" class="headerlink" title="7. å°ç»“ npm æœ€ä½³å®è·µ"></a>7. å°ç»“ npm æœ€ä½³å®è·µ</h2><ul>
<li>ä½¿ç”¨ npm-init åˆå§‹åŒ–æ–°é¡¹ç›®</li>
<li>ç»Ÿä¸€é¡¹ç›®é…ç½®: éœ€å›¢é˜Ÿå…±äº«çš„ npm config é…ç½®é¡¹ï¼Œå›ºåŒ–åˆ° .npmrc æ–‡ä»¶ä¸­</li>
<li>ç»Ÿä¸€è¿è¡Œç¯å¢ƒï¼Œç»Ÿä¸€ package.jsonï¼Œç»Ÿä¸€ package-lock æ–‡ä»¶</li>
<li>åˆç†ä½¿ç”¨å¤šæ ·åŒ–çš„æºå®‰è£…ä¾èµ–åŒ…: <code>npm install &lt;git url&gt;|&lt;local file&gt;</code></li>
<li>ä½¿ç”¨ npm: &gt;=5.2 ç‰ˆæœ¬</li>
<li>ä½¿ç”¨ npm scripts ä¸ npx (npm: &gt;=5.2) è„šæœ¬ç®¡ç†åº”ç”¨ç›¸å…³è„šæœ¬</li>
</ul>
<h2 id="8-æ›´å¤šèµ„æ–™"><a href="#8-æ›´å¤šèµ„æ–™" class="headerlink" title="8. æ›´å¤šèµ„æ–™"></a>8. æ›´å¤šèµ„æ–™</h2><p><strong>å‚è€ƒ</strong></p>
<ul>
<li>npm team æˆå‘˜ Ashley Williams åœ¨ 2016 å¹´ Node.js Live ä¸Šçš„ talk: <em>You Donâ€™t Know npm</em>, å½“æ—¶è¿˜æ²¡æœ‰ npm 5<ul>
<li>YouTube è§†é¢‘é“¾æ¥: <a href="https://www.youtube.com/watch?v=hopWbVKmiVQ&amp;t=537s" target="_blank" rel="noopener">Node.js Live (Paris) - Ashley Williams, You Donâ€™t Know npm</a></li>
<li>æ¼”è®²ç”¨çš„ slides: <a href="http://ashleygwilliams.github.io/you-dont-know-npm" target="_blank" rel="noopener">the ag_deck</a></li>
</ul>
</li>
<li>è¿™ç¯‡ 2015 å¹´çš„æ–‡ç« ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨æŠŠæœ¬åœ°æ¨¡å—æ‰“åŒ…åˆ° node_modules ä¾èµ–ä¸­: <a href="https://bit.ly/2DLnaCd" target="_blank" rel="noopener">Build modular application with npm local modules</a></li>
<li>ä¸€ç¯‡å¾ˆå¥½çš„ä»‹ç» package-lock.json çš„æ–‡ç« : <a href="https://bit.ly/2Fiok9Z" target="_blank" rel="noopener">Everything you wanted to know about package-lock.json</a></li>
<li>é˜®ä¸€å³° <a href="http://ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="noopener">npm scripts ä½¿ç”¨æŒ‡å—</a></li>
<li>Kat MarchÃ¡n ä»‹ç»npx:<ul>
<li>åŸæ–‡ <a href="http://t.cn/RKIYHBA" target="_blank" rel="noopener">Introducing npx: an npm package runner</a></li>
<li>ä¸­æ–‡ <a href="https://robin-front.github.io/2017/07/14/introducing-npx-an-npm-package-runner/" target="_blank" rel="noopener">npxæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦npx?</a></li>
</ul>
</li>
</ul>
<p><strong>æ–‡æ¡£</strong>  </p>
<ul>
<li>npm å®˜æ–¹æ–‡æ¡£, æ— ä¸­æ–‡ç¿»è¯‘  <ul>
<li><a href="https://docs.npmjs.com/files/package.json" target="_blank" rel="noopener">package.json æ–‡ä»¶</a></li>
<li><a href="https://docs.npmjs.com/misc/config" target="_blank" rel="noopener">npm config é…ç½®</a></li>
<li><a href="https://semver.npmjs.com" target="_blank" rel="noopener">npm semver è®¡ç®—å™¨</a></li>
<li><a href="https://docs.npmjs.com/cli/install" target="_blank" rel="noopener">node_modules ç›®å½•æ‰å¹³åŒ–</a></li>
</ul>
</li>
<li>yarn ä¸­æ–‡æ–‡æ¡£ï¼Œè™½ç„¶æ˜¯ npm ç«äº‰è€…ä½†å…¼å®¹ package.json å’Œ node_modules ç›®å½•ï¼Œå› æ­¤è¿™ä¸¤éƒ¨åˆ†ä¸€æ ·å¯å‚è€ƒï¼š  <ul>
<li><a href="https://yarnpkg.com/zh-Hans/docs/package-json" target="_blank" rel="noopener">package.json - ä¸­æ–‡</a></li>
<li><a href="https://yarnpkg.com/zh-Hans/docs/dependencies" target="_blank" rel="noopener">ä¾èµ–ä¸ç‰ˆæœ¬ - ä¸­æ–‡</a></li>
</ul>
</li>
</ul>
<p><strong>å»¶ä¼¸é˜…è¯»</strong></p>
<ul>
<li>sam boyer ã€Šæ‰€ä»¥ä½ æƒ³å¼€å‘ä¸€ä¸ªåŒ…ç®¡ç†ç³»ç»Ÿã€‹ï¼Œä»æ— å…³ç‰¹å®šè¯­è¨€çš„è§’åº¦ï¼Œä»‹ç»ä¸€ä¸ªåŒ…ç®¡ç†ç³»ç»Ÿçš„æ–¹æ–¹é¢é¢: <a href="https://bit.ly/2G36U1e" target="_blank" rel="noopener">So you want to write a package manager</a></li>
</ul>

    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/05/19/life-is-short-i-use-template-literals/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            æ–°ç¯‡
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="rianma's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        mmg9403@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mmg9403@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                ä¸»é¡µ
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    å½’æ¡£
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/01/">ä¸€æœˆ 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/07/">ä¸ƒæœˆ 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">äº”æœˆ 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">ä¸‰æœˆ 2018<span class="sidebar_archives-count">1</span></a>
            </li></ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

å¾ˆé«˜å…´æ‚¨ä½¿ç”¨å¹¶å–œæ¬¢è¯¥ä¸»é¢˜ï¼Œå¼€å‘ä¸æ˜“ ååˆ†è°¢è°¢ä¸å¸Œæœ›æ‚¨å¯ä»¥ä¿ç•™ä¸€ä¸‹ç‰ˆæƒå£°æ˜ã€‚
å¦‚æœæ‚¨ä»ç„¶æƒ³åˆ é™¤çš„è¯ èƒ½å¦åªä¿ç•™ç¬¬ä¸€é¡¹å‘¢ï¼Ÿå³ "Theme Material"
å®ƒä¸ä¼šå½±å“ç¾è§‚å¹¶å¯ä»¥ç»™å¼€å‘è€…å¾ˆå¤§çš„æ”¯æŒå’ŒåŠ¨åŠ›ã€‚ :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material" class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            ä¸»é¢˜ - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/myan17" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/myan17" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;Â©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>rianma
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        å¾ˆé«˜å…´æ‚¨ä½¿ç”¨è¯¥ä¸»é¢˜ï¼Œå¼€å‘ä¸æ˜“ï¼Œå¸Œæœ›æ‚¨å¯ä»¥ä¿ç•™ä¸€ä¸‹ç‰ˆæƒå£°æ˜ã€‚
        å®ƒä¸ä¼šå½±å“ç¾è§‚å¹¶å¯ä»¥ç»™å¼€å‘è€…å¾ˆå¤§çš„æ”¯æŒã€‚ :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('ç”±äº UC æµè§ˆå™¨ä½¿ç”¨ææ—§çš„å†…æ ¸ï¼Œè€Œæœ¬ç½‘ç«™ä½¿ç”¨äº†ä¸€äº›æ–°çš„ç‰¹æ€§ã€‚\nä¸ºäº†æ‚¨èƒ½æ›´å¥½çš„æµè§ˆï¼Œæ¨èä½¿ç”¨ Chrome æˆ– Firefox æµè§ˆå™¨ã€‚');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c Â© Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
